{"version":3,"file":"66.5b5b447015ad96683dba.js?v=5b5b447015ad96683dba","mappings":"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","sources":["webpack://@deathbeds/jupyterlab-fonts/./style/editor.css","webpack://@deathbeds/jupyterlab-fonts/./style/index.css","webpack://@deathbeds/jupyterlab-fonts/./style/license.css","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/css-loader/dist/runtime/api.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@deathbeds/jupyterlab-fonts/../../node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@deathbeds/jupyterlab-fonts/./lib/button.js","webpack://@deathbeds/jupyterlab-fonts/./style/icons/copyright.svg","webpack://@deathbeds/jupyterlab-fonts/./lib/icons.js","webpack://@deathbeds/jupyterlab-fonts/./style/icons/fonts.svg","webpack://@deathbeds/jupyterlab-fonts/./lib/labcompat.js","webpack://@deathbeds/jupyterlab-fonts/./style/license.css?d500","webpack://@deathbeds/jupyterlab-fonts/./lib/license.js","webpack://@deathbeds/jupyterlab-fonts/./lib/manager.js","webpack://@deathbeds/jupyterlab-fonts/./style/editor.css?d282","webpack://@deathbeds/jupyterlab-fonts/./lib/editor.js","webpack://@deathbeds/jupyterlab-fonts/./style/index.css?f019","webpack://@deathbeds/jupyterlab-fonts/./lib/plugin.js","webpack://@deathbeds/jupyterlab-fonts/./lib/stylist.js","webpack://@deathbeds/jupyterlab-fonts/./lib/tokens.js","webpack://@deathbeds/jupyterlab-fonts/./lib/util.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jp-FontsEditor {\n  color: var(--jp-ui-font-color0);\n  overflow-y: auto;\n  background-color: var(--jp-layout-color1);\n}\n\n.jp-FontsEditor-button.jp-mod-styled {\n  font-size: var(--jp-ui-font-size1);\n  background-color: var(--jp-layout-color0);\n  border: solid 1px transparent;\n  white-space: nowrap;\n  flex: 0;\n}\n\n.jp-FontsEditor .lm-CommandPalette-header {\n  margin: 0;\n}\n\n.jp-FontsEditor-enable label {\n  margin: calc(var(--jp-ui-font-size1) / 2) 0 0 var(--jp-ui-font-size1);\n  font-size: var(--jp-ui-font-size1);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.jp-FontsEditor-button.jp-mod-styled:focus,\n.jp-FontsEditor-button.jp-mod-styled:hover {\n  border-color: var(--jp-border-color1);\n}\n\n.jp-FontsEditor h2 {\n  padding: var(--jp-ui-font-size1);\n  margin: 0;\n  display: flex;\n}\n\n.jp-FontsEditor h2 > label {\n  flex: 1;\n}\n\n.jp-FontsEditor-delete-icon.jp-FontsEditor-button.jp-mod-styled {\n  background-repeat: no-repeat;\n  background-position: center;\n  color: transparent;\n}\n\n.jp-FontsEditor h2 .jp-NotebookIcon {\n  width: var(--jp-ui-font-size2);\n  height: calc(var(--jp-ui-font-size2));\n  display: inline-block;\n  vertical-align: middle;\n  background-repeat: no-repeat;\n}\n\n.jp-FontsEditor-embed {\n  padding: 0;\n  margin: 0;\n}\n\n.jp-FontsEditor-embed li {\n  display: flex;\n  flex-direction: row;\n  list-style: none;\n  align-items: baseline;\n  justify-content: space-between;\n  margin: 0 var(--jp-ui-font-size1);\n}\n\n.jp-FontsEditor-embed li > * {\n  flex: 1;\n  font-size: var(--jp-ui-font-size1);\n}\n\n.jp-FontsEditor-embed li > .jp-FontsEditor-size {\n  flex: 0;\n  padding: 0 var(--jp-ui-font-size1);\n  font-size: var(--jp-ui-font-size0);\n  color: var(--jp-ui-font-color2);\n  white-space: nowrap;\n}\n\n.jp-FontsEditor-field {\n  display: flex;\n  margin: 0 var(--jp-ui-font-size1);\n  align-items: baseline;\n}\n\n.jp-FontsEditor-field label {\n  white-space: nowrap;\n  flex: 0;\n  font-size: var(--jp-ui-font-size1);\n  padding-right: var(--jp-ui-font-size1);\n}\n\n.jp-FontsEditor-field > div {\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n  align-items: baseline;\n}\n.jp-FontsEditor-field > div * {\n  display: block;\n  flex: 1;\n  text-align: right;\n  font-size: var(--jp-ui-font-size1);\n}\n\n.jp-FontsEditor-field select {\n  font-weight: bold;\n  border: none;\n  background: transparent;\n  background-image: var(--jp-ui-select-caret);\n  background-repeat: no-repeat;\n  background-position: 99% center;\n  background-size: 18px;\n  text-align: right;\n  text-align-last: right;\n  margin-left: var(--jp-notebook-padding);\n  padding-right: calc(2 * var(--jp-notebook-padding));\n}\n\n.jp-FontsEditor option {\n  text-align: right;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./style/editor.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,+BAA+B;EAC/B,gBAAgB;EAChB,yCAAyC;AAC3C;;AAEA;EACE,kCAAkC;EAClC,yCAAyC;EACzC,6BAA6B;EAC7B,mBAAmB;EACnB,OAAO;AACT;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,qEAAqE;EACrE,kCAAkC;EAClC,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;;EAEE,qCAAqC;AACvC;;AAEA;EACE,gCAAgC;EAChC,SAAS;EACT,aAAa;AACf;;AAEA;EACE,OAAO;AACT;;AAEA;EACE,4BAA4B;EAC5B,2BAA2B;EAC3B,kBAAkB;AACpB;;AAEA;EACE,8BAA8B;EAC9B,qCAAqC;EACrC,qBAAqB;EACrB,sBAAsB;EACtB,4BAA4B;AAC9B;;AAEA;EACE,UAAU;EACV,SAAS;AACX;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,gBAAgB;EAChB,qBAAqB;EACrB,8BAA8B;EAC9B,iCAAiC;AACnC;;AAEA;EACE,OAAO;EACP,kCAAkC;AACpC;;AAEA;EACE,OAAO;EACP,kCAAkC;EAClC,kCAAkC;EAClC,+BAA+B;EAC/B,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,iCAAiC;EACjC,qBAAqB;AACvB;;AAEA;EACE,mBAAmB;EACnB,OAAO;EACP,kCAAkC;EAClC,sCAAsC;AACxC;;AAEA;EACE,aAAa;EACb,OAAO;EACP,mBAAmB;EACnB,qBAAqB;AACvB;AACA;EACE,cAAc;EACd,OAAO;EACP,iBAAiB;EACjB,kCAAkC;AACpC;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,2CAA2C;EAC3C,4BAA4B;EAC5B,+BAA+B;EAC/B,qBAAqB;EACrB,iBAAiB;EACjB,sBAAsB;EACtB,uCAAuC;EACvC,mDAAmD;AACrD;;AAEA;EACE,iBAAiB;AACnB\",\"sourcesContent\":[\".jp-FontsEditor {\\n  color: var(--jp-ui-font-color0);\\n  overflow-y: auto;\\n  background-color: var(--jp-layout-color1);\\n}\\n\\n.jp-FontsEditor-button.jp-mod-styled {\\n  font-size: var(--jp-ui-font-size1);\\n  background-color: var(--jp-layout-color0);\\n  border: solid 1px transparent;\\n  white-space: nowrap;\\n  flex: 0;\\n}\\n\\n.jp-FontsEditor .lm-CommandPalette-header {\\n  margin: 0;\\n}\\n\\n.jp-FontsEditor-enable label {\\n  margin: calc(var(--jp-ui-font-size1) / 2) 0 0 var(--jp-ui-font-size1);\\n  font-size: var(--jp-ui-font-size1);\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n}\\n\\n.jp-FontsEditor-button.jp-mod-styled:focus,\\n.jp-FontsEditor-button.jp-mod-styled:hover {\\n  border-color: var(--jp-border-color1);\\n}\\n\\n.jp-FontsEditor h2 {\\n  padding: var(--jp-ui-font-size1);\\n  margin: 0;\\n  display: flex;\\n}\\n\\n.jp-FontsEditor h2 > label {\\n  flex: 1;\\n}\\n\\n.jp-FontsEditor-delete-icon.jp-FontsEditor-button.jp-mod-styled {\\n  background-repeat: no-repeat;\\n  background-position: center;\\n  color: transparent;\\n}\\n\\n.jp-FontsEditor h2 .jp-NotebookIcon {\\n  width: var(--jp-ui-font-size2);\\n  height: calc(var(--jp-ui-font-size2));\\n  display: inline-block;\\n  vertical-align: middle;\\n  background-repeat: no-repeat;\\n}\\n\\n.jp-FontsEditor-embed {\\n  padding: 0;\\n  margin: 0;\\n}\\n\\n.jp-FontsEditor-embed li {\\n  display: flex;\\n  flex-direction: row;\\n  list-style: none;\\n  align-items: baseline;\\n  justify-content: space-between;\\n  margin: 0 var(--jp-ui-font-size1);\\n}\\n\\n.jp-FontsEditor-embed li > * {\\n  flex: 1;\\n  font-size: var(--jp-ui-font-size1);\\n}\\n\\n.jp-FontsEditor-embed li > .jp-FontsEditor-size {\\n  flex: 0;\\n  padding: 0 var(--jp-ui-font-size1);\\n  font-size: var(--jp-ui-font-size0);\\n  color: var(--jp-ui-font-color2);\\n  white-space: nowrap;\\n}\\n\\n.jp-FontsEditor-field {\\n  display: flex;\\n  margin: 0 var(--jp-ui-font-size1);\\n  align-items: baseline;\\n}\\n\\n.jp-FontsEditor-field label {\\n  white-space: nowrap;\\n  flex: 0;\\n  font-size: var(--jp-ui-font-size1);\\n  padding-right: var(--jp-ui-font-size1);\\n}\\n\\n.jp-FontsEditor-field > div {\\n  display: flex;\\n  flex: 1;\\n  flex-direction: row;\\n  align-items: baseline;\\n}\\n.jp-FontsEditor-field > div * {\\n  display: block;\\n  flex: 1;\\n  text-align: right;\\n  font-size: var(--jp-ui-font-size1);\\n}\\n\\n.jp-FontsEditor-field select {\\n  font-weight: bold;\\n  border: none;\\n  background: transparent;\\n  background-image: var(--jp-ui-select-caret);\\n  background-repeat: no-repeat;\\n  background-position: 99% center;\\n  background-size: 18px;\\n  text-align: right;\\n  text-align-last: right;\\n  margin-left: var(--jp-notebook-padding);\\n  padding-right: calc(2 * var(--jp-notebook-padding));\\n}\\n\\n.jp-FontsEditor option {\\n  text-align: right;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.jp-LicenseViewer-wrapper {\n  display: flex;\n  flex-direction: column;\n}\n\n.jp-LicenseViewer {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: var(--jp-notebook-padding);\n  color: var(--jp-ui-font-color0);\n  height: 100%;\n}\n\n.jp-LicenseViewer h1,\n.jp-LicenseViewer h2 {\n  flex: 0;\n  margin: var(--jp-notebook-padding) 0;\n}\n\n.jp-LicenseViewer h2 {\n  color: var(--jp-ui-font-color1);\n}\n\n.jp-LicenseViewer pre {\n  flex: 1;\n  overflow-y: auto;\n  font-size: 80%;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./style/license.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,OAAO;EACP,aAAa;EACb,sBAAsB;EACtB,mCAAmC;EACnC,+BAA+B;EAC/B,YAAY;AACd;;AAEA;;EAEE,OAAO;EACP,oCAAoC;AACtC;;AAEA;EACE,+BAA+B;AACjC;;AAEA;EACE,OAAO;EACP,gBAAgB;EAChB,cAAc;AAChB\",\"sourcesContent\":[\".jp-LicenseViewer-wrapper {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.jp-LicenseViewer {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  padding: var(--jp-notebook-padding);\\n  color: var(--jp-ui-font-color0);\\n  height: 100%;\\n}\\n\\n.jp-LicenseViewer h1,\\n.jp-LicenseViewer h2 {\\n  flex: 0;\\n  margin: var(--jp-notebook-padding) 0;\\n}\\n\\n.jp-LicenseViewer h2 {\\n  color: var(--jp-ui-font-color1);\\n}\\n\\n.jp-LicenseViewer pre {\\n  flex: 1;\\n  overflow-y: auto;\\n  font-size: 80%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","import { ToolbarButton } from '@jupyterlab/apputils';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Signal } from '@lumino/signaling';\nimport { ICONS } from './icons';\nimport * as compat from './labcompat';\nimport { PACKAGE_NAME, CONFIGURED_CLASS } from './tokens';\n/**\n * A notebook widget extension that adds a button to the toolbar.\n */\nexport class NotebookFontsButton {\n    constructor() {\n        this.widgetRequested = new Signal(this);\n    }\n    /**\n     * Create a new extension object.\n     */\n    createNew(panel, context) {\n        let button = new ToolbarButton({\n            icon: ICONS.fonts,\n            onClick: () => {\n                this.widgetRequested.emit(void 0);\n            },\n            tooltip: 'Customize Notebook Fonts',\n        });\n        const metaUpdated = () => {\n            const metadata = panel.model\n                ? compat.getPanelMetadata(panel.model, PACKAGE_NAME)\n                : null;\n            if (metadata) {\n                button.addClass(CONFIGURED_CLASS);\n            }\n            else {\n                button.removeClass(CONFIGURED_CLASS);\n            }\n        };\n        const panelModel = panel.model;\n        if (panelModel) {\n            compat.metadataSignal(panelModel).connect(metaUpdated);\n            metaUpdated();\n        }\n        panel.toolbar.insertItem(9, 'fonts', button);\n        return new DisposableDelegate(() => {\n            if (panelModel) {\n                compat.metadataSignal(panelModel).disconnect(metaUpdated);\n            }\n            button.dispose();\n        });\n    }\n}\n//# sourceMappingURL=button.js.map","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\">\\n  <defs>\\n    <path id=\\\"a\\\" d=\\\"M24 0v24H0V0h24z\\\" />\\n  </defs>\\n  <clipPath id=\\\"b\\\">\\n    <use xlink:href=\\\"#a\\\" overflow=\\\"visible\\\" />\\n  </clipPath>\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\">\\n    <circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"10\\\" fill=\\\"rgba(255,255,255,0.5)\\\"></circle>\\n  </g>\\n  <g class=\\\"jp-icon-accent0 jp-icon-selectable\\\" fill=\\\"#fff\\\">\\n    <path d=\\\"M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\\\" clip-path=\\\"url(#b)\\\" />\\n  </g>\\n</svg>\\n\";","import { LabIcon } from '@jupyterlab/ui-components';\nimport license from '!!raw-loader!../style/icons/copyright.svg';\nimport fonts from '!!raw-loader!../style/icons/fonts.svg';\nexport const ICONS = {\n    fonts: new LabIcon({\n        name: 'fonts:fonts',\n        svgstr: fonts,\n    }),\n    license: new LabIcon({\n        name: 'fonts:license',\n        svgstr: license,\n    }),\n};\n//# sourceMappingURL=icons.js.map","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" baseProfile=\\\"tiny\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\">\\n    <rect x=\\\"1\\\" y=\\\"1\\\" width=\\\"22\\\" height=\\\"22\\\" rx=\\\"2\\\" ry=\\\"2\\\"/>\\n  </g>\\n  <g class=\\\"jp-icon-accent0 jp-icon-selectable\\\" fill=\\\"#fff\\\">\\n    <text text-anchor=\\\"middle\\\" x=\\\"12px\\\" font-family=\\\"sans-serif\\\" alignment-baseline=\\\"middle\\\" y=\\\"17px\\\">Aa</text>\\n  </g>\\n</svg>\\n\";","export function metadataSignal(panelModel) {\n    var _a;\n    if ((_a = panelModel === null || panelModel === void 0 ? void 0 : panelModel.metadata) === null || _a === void 0 ? void 0 : _a.changed) {\n        return panelModel.metadata.changed;\n    }\n    if (panelModel.sharedModel) {\n        return panelModel.sharedModel.metadataChanged;\n    }\n    throw new Error('no metadata for panel');\n}\nexport function getPanelMetadata(panelModel, key) {\n    if (typeof panelModel.metadata.get === 'function') {\n        return panelModel.metadata.get(key);\n    }\n    if (panelModel.sharedModel) {\n        return panelModel.sharedModel.getMetadata(key);\n    }\n    console.error('panel', panelModel);\n    throw new Error('no metadata for panel');\n}\nexport function setPanelMetadata(panelModel, key, value) {\n    if (typeof panelModel.metadata.set === 'function') {\n        return panelModel.metadata.set(key, value);\n    }\n    if (panelModel.sharedModel) {\n        return panelModel.sharedModel.setMetadata(key, value);\n    }\n    console.error('panel', panelModel);\n    throw new Error('no metadata for panel');\n}\nexport function getCellMetadata(cellModel, key) {\n    if (typeof cellModel.metadata.get === 'function') {\n        return cellModel.metadata.get(key);\n    }\n    if (cellModel.sharedModel) {\n        return cellModel.sharedModel.getMetadata(key);\n    }\n    console.error('cell', cellModel);\n    throw new Error('no metadata for cell');\n}\nexport function setCellMetadata(cellModel, key, value) {\n    if (typeof cellModel.metadata.set === 'function') {\n        return cellModel.metadata.set(key, value);\n    }\n    if (cellModel.sharedModel) {\n        return cellModel.sharedModel.setMetadata(key, value);\n    }\n    console.error('cell', cellModel);\n    throw new Error('no metadata for cell');\n}\nexport function deleteCellMetadata(cellModel, key) {\n    if (typeof cellModel.metadata.delete === 'function') {\n        return cellModel.metadata.delete(key);\n    }\n    if (cellModel.sharedModel) {\n        return cellModel.sharedModel.deleteMetadata(key);\n    }\n    console.error('cell', cellModel);\n    throw new Error('no metadata for cell');\n}\n//# sourceMappingURL=labcompat.js.map","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./license.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./license.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { VDomModel, VDomRenderer } from '@jupyterlab/apputils';\nimport * as React from 'react';\nimport '../style/license.css';\nconst WRAPPER_CLASS = 'jp-LicenseViewer-wrapper';\nconst LICENSE_CLASS = 'jp-LicenseViewer';\nexport class LicenseViewer extends VDomRenderer {\n    constructor(options) {\n        super(new LicenseViewer.Model(options));\n    }\n    render() {\n        this.addClass(WRAPPER_CLASS);\n        let m = this.model;\n        // Bail if there is no model.\n        if (!m) {\n            return React.createElement(React.Fragment, null);\n        }\n        const text = m.licenseText ? React.createElement(\"pre\", null, m.licenseText) : React.createElement(React.Fragment, null);\n        return (React.createElement(\"div\", { className: LICENSE_CLASS },\n            React.createElement(\"h1\", null, m.font.name),\n            React.createElement(\"h2\", null, m.font.license.name),\n            text));\n    }\n}\n(function (LicenseViewer) {\n    class Model extends VDomModel {\n        constructor(options) {\n            super();\n            this.font = options.font;\n        }\n        get font() {\n            return this._font;\n        }\n        set font(font) {\n            this._font = font;\n            this.stateChanged.emit(void 0);\n            this._licenseTextPromise = new Promise((resolve, reject) => {\n                this._font.license\n                    .text()\n                    .then((licenseText) => {\n                    this._licenseText = licenseText;\n                    this.stateChanged.emit(void 0);\n                    resolve(this._licenseText);\n                })\n                    .catch((err) => {\n                    reject(err);\n                });\n            });\n        }\n        get licenseText() {\n            return this._licenseText;\n        }\n        get licenseTextPromise() {\n            return this._licenseTextPromise;\n        }\n    }\n    LicenseViewer.Model = Model;\n})(LicenseViewer || (LicenseViewer = {}));\n//# sourceMappingURL=license.js.map","import { PromiseDelegate } from '@lumino/coreutils';\nimport { Signal } from '@lumino/signaling';\nimport { Menu } from '@lumino/widgets';\nimport * as compat from './labcompat';\nimport { Stylist } from './stylist';\nimport { PACKAGE_NAME, CSS, CMD, TEXT_LABELS, TextKind, ROOT, TEXT_OPTIONS, FontFormat, KIND_LABELS, } from './tokens';\nimport { dataURISrc } from './util';\nconst ALL_PALETTE = 'Fonts';\nconst PALETTE = {\n    code: 'Fonts (Code)',\n    content: 'Fonts (Content)',\n    ui: 'Fonts (UI)',\n};\nexport class FontManager {\n    constructor(commands, palette, notebooks) {\n        this.licensePaneRequested = new Signal(this);\n        this._fontFamilyMenus = new Map();\n        this._fontSizeMenus = new Map();\n        this._lineHeightMenus = new Map();\n        this._ready = new PromiseDelegate();\n        this._stylist = new Stylist();\n        this._stylist.cacheUpdated.connect(this.settingsUpdate, this);\n        this._commands = commands;\n        this._palette = palette;\n        this._notebooks = notebooks;\n        this._notebooks.currentChanged.connect(this._onNotebooksChanged, this);\n        this.makeMenus(commands);\n        this.makeCommands();\n        this.hack();\n    }\n    get ready() {\n        return this._ready.promise;\n    }\n    get fonts() {\n        return this._stylist.fonts;\n    }\n    get enabled() {\n        if (!this.settings) {\n            return false;\n        }\n        const enabled = !!this._settings.get('enabled').composite;\n        return enabled;\n    }\n    set enabled(enabled) {\n        if (!this.settings) {\n            return;\n        }\n        this._settings.set('enabled', enabled).then().catch(console.warn);\n    }\n    get menu() {\n        return this._menu;\n    }\n    get stylesheets() {\n        return this._stylist.stylesheets;\n    }\n    get settings() {\n        return this._settings;\n    }\n    set settings(settings) {\n        if (this._settings) {\n            this._settings.changed.disconnect(this.settingsUpdate, this);\n        }\n        this._settings = settings;\n        if (settings) {\n            settings.changed.connect(this.settingsUpdate, this);\n        }\n        void this.settingsUpdate();\n    }\n    setTransientNotebookStyle(panel, style) {\n        this._stylist.setTransientNotebookStyle(panel, style);\n    }\n    getTransientNotebookStyle(panel) {\n        return this._stylist.getTransientNotebookStyle(panel);\n    }\n    async dataURISrc(url, format = FontFormat.woff2) {\n        return await dataURISrc(url, format);\n    }\n    registerFontFace(options) {\n        this._stylist.fonts.set(options.name, options);\n        this.registerFontCommands(options);\n    }\n    getVarName(property, { kind }) {\n        if (kind == null) {\n            return null;\n        }\n        return CSS[kind][property] || null;\n    }\n    getTextStyle(property, { kind, notebook }) {\n        if (!notebook && !this.settings) {\n            return null;\n        }\n        try {\n            const styles = (notebook === null || notebook === void 0 ? void 0 : notebook.model)\n                ? compat.getPanelMetadata(notebook.model, PACKAGE_NAME).styles\n                : this._settings.get('styles').composite;\n            let varName = this.getVarName(property, { kind });\n            if (styles != null) {\n                const rootStyle = styles[ROOT];\n                if (rootStyle == null) {\n                    return null;\n                }\n                return rootStyle[varName];\n            }\n        }\n        catch (err) {\n            //\n        }\n        return null;\n    }\n    async setTextStyle(property, value, { kind, notebook }) {\n        if (!notebook && !this.settings) {\n            return;\n        }\n        let oldStyles;\n        const model = notebook === null || notebook === void 0 ? void 0 : notebook.model;\n        try {\n            if (model) {\n                oldStyles = compat.getPanelMetadata(model, PACKAGE_NAME).styles;\n            }\n            else {\n                oldStyles = this._settings.get('styles').user;\n            }\n        }\n        catch (err) {\n            oldStyles = {};\n        }\n        let styles = JSON.parse(JSON.stringify(oldStyles || {}));\n        let root = (styles[ROOT] = styles[ROOT] ? styles[ROOT] : {});\n        let varName = this.getVarName(property, { kind });\n        if (root) {\n            if (value == null) {\n                delete root[varName];\n            }\n            else {\n                root[varName] = value;\n            }\n        }\n        if (notebook) {\n            let metadata = (notebook.model\n                ? compat.getPanelMetadata(notebook.model, PACKAGE_NAME) || {}\n                : {});\n            metadata = JSON.parse(JSON.stringify(metadata));\n            metadata.styles = styles;\n            switch (property) {\n                case 'font-family':\n                    if (value != null) {\n                        await this.embedFont(value, metadata);\n                    }\n                    break;\n                default:\n                    break;\n            }\n            this.cleanMetadata(metadata);\n            if (notebook.model) {\n                compat.setPanelMetadata(notebook.model, PACKAGE_NAME, metadata);\n            }\n        }\n        else {\n            if (!Object.keys(styles[ROOT] || {}).length) {\n                delete styles[ROOT];\n            }\n            try {\n                await this._settings.set('styles', styles);\n            }\n            catch (err) {\n                console.warn(err);\n            }\n        }\n    }\n    cleanMetadata(metadata) {\n        const rawStyle = JSON.stringify(metadata.styles, null, 2);\n        const oldFonts = Object.keys(metadata.fonts || {});\n        for (let fontFamily of oldFonts) {\n            let pattern = `'${fontFamily}'`;\n            if (rawStyle.indexOf(pattern) === -1) {\n                if (metadata.fonts) {\n                    delete metadata.fonts[fontFamily];\n                }\n                if (metadata.fontLicenses) {\n                    delete metadata.fontLicenses[fontFamily];\n                }\n            }\n        }\n    }\n    async embedFont(fontFamily, metadata) {\n        if (fontFamily == null) {\n            return;\n        }\n        const unquoted = fontFamily.replace(/(['\"]?)(.*)\\1/, '$2');\n        const registered = this._stylist.fonts.get(unquoted);\n        if (!registered) {\n            return;\n        }\n        try {\n            const faces = await registered.faces();\n            const oldFaces = (metadata.fonts || {});\n            const oldLicenses = (metadata.fontLicenses || {});\n            oldFaces[unquoted] = faces;\n            oldLicenses[unquoted] = {\n                spdx: registered.license.spdx,\n                name: registered.license.name,\n                text: await registered.license.text(),\n                holders: registered.license.holders,\n            };\n            metadata.fonts = oldFaces;\n            metadata.fontLicenses = oldLicenses;\n        }\n        catch (err) {\n            console.warn('error embedding font');\n            console.warn(err);\n        }\n    }\n    _onNotebooksChanged() {\n        let styled = this._stylist.notebooks();\n        this._notebooks.forEach((notebook) => {\n            if (styled.indexOf(notebook) === -1) {\n                this._registerNotebook(notebook);\n            }\n        });\n    }\n    _registerNotebook(panel) {\n        this._stylist.registerNotebook(panel, true);\n        let watcher = this._notebookMetaWatcher(panel);\n        if (panel === null || panel === void 0 ? void 0 : panel.model) {\n            compat.metadataSignal(panel.model).connect(watcher);\n        }\n        panel.disposed.connect(this._onNotebookDisposed, this);\n        void watcher().then(() => this.hack());\n    }\n    _onNotebookDisposed(panel) {\n        this._stylist.registerNotebook(panel, false);\n    }\n    _notebookMetaWatcher(panel) {\n        return async () => {\n            this._notebooks.forEach(async (notebook) => {\n                if (notebook.id !== panel.id || !notebook.model) {\n                    return;\n                }\n                const meta = compat.getPanelMetadata(notebook.model, PACKAGE_NAME);\n                if (meta) {\n                    await this.ensureJss();\n                    this._stylist.stylesheet(meta, notebook);\n                }\n            });\n        };\n    }\n    fontSizeOptions() {\n        return Array.from(Array(25).keys()).map((i) => `${i + 8}px`);\n    }\n    fontSizeCommands(prefix) {\n        return this.fontSizeOptions().map((px) => `${prefix}:${px}`);\n    }\n    makeCommands() {\n        [TextKind.code, TextKind.content, TextKind.ui].forEach((kind) => {\n            const sizeCmd = CMD[kind].fontSize;\n            if (!sizeCmd) {\n                ['Increase', 'Decrease'].map((label, i) => {\n                    var _a;\n                    let command = `${sizeCmd}:${label.toLowerCase()}`;\n                    this._commands.addCommand(command, {\n                        label: `${label} Code Font Size`,\n                        execute: async () => {\n                            let oldSize = this.getTextStyle('font-size', { kind });\n                            let cfs = parseInt((oldSize || '0').replace(/px$/, ''), 10) || 13;\n                            try {\n                                await this.setTextStyle('font-size', `${cfs + (i ? -1 : 1)}px`, {\n                                    kind,\n                                });\n                            }\n                            catch (err) {\n                                console.warn(err);\n                            }\n                        },\n                        isVisible: () => this.enabled,\n                    });\n                    (_a = this._fontSizeMenus.get(kind)) === null || _a === void 0 ? void 0 : _a.addItem({ command });\n                    this._palette.addItem({ command, category: PALETTE[kind], rank: 0 });\n                });\n            }\n            ['line-height', 'font-size', 'font-family'].forEach((prop) => {\n                if (kind == TextKind.ui && prop !== 'font-family') {\n                    return;\n                }\n                const command = `${kind}-${prop}:-reset`;\n                this._commands.addCommand(command, {\n                    label: `Default ${KIND_LABELS[kind]} ${TEXT_LABELS[prop]}`,\n                    execute: () => this.setTextStyle(prop, null, { kind }),\n                    isVisible: () => this.enabled,\n                    isToggled: () => this.getTextStyle(prop, { kind }) == null,\n                });\n            });\n            if (kind !== TextKind.ui) {\n                TEXT_OPTIONS['line-height'](this).forEach((lineHeight) => {\n                    var _a;\n                    const cmd = CMD[kind].lineHeight;\n                    if (!cmd) {\n                        return;\n                    }\n                    const command = `${cmd}:${lineHeight}`;\n                    this._commands.addCommand(command, {\n                        label: `${lineHeight}`,\n                        isToggled: () => this.getTextStyle('line-height', { kind }) === lineHeight,\n                        isVisible: () => this.enabled,\n                        execute: () => this.setTextStyle('line-height', lineHeight, { kind }),\n                    });\n                    (_a = this._lineHeightMenus.get(kind)) === null || _a === void 0 ? void 0 : _a.addItem({ command });\n                });\n                TEXT_OPTIONS['font-size'](this).forEach((px) => {\n                    var _a;\n                    const cmd = CMD[kind].fontSize;\n                    if (!cmd) {\n                        return;\n                    }\n                    const command = `${cmd}:${px}`;\n                    this._commands.addCommand(command, {\n                        label: `${px}`,\n                        isToggled: () => this.getTextStyle('font-size', { kind }) === px,\n                        isVisible: () => this.enabled,\n                        execute: () => this.setTextStyle('font-size', px, { kind }),\n                    });\n                    (_a = this._fontSizeMenus.get(kind)) === null || _a === void 0 ? void 0 : _a.addItem({ command });\n                });\n            }\n        });\n        ['Enable', 'Disable'].map((label, i) => {\n            const command = `custom-fonts:${label.toLowerCase()}`;\n            this._commands.addCommand(command, {\n                label: `${label} Custom Fonts`,\n                isVisible: () => this.enabled === !!i,\n                execute: async () => {\n                    if (!this._settings) {\n                        return;\n                    }\n                    try {\n                        await this._settings.set('enabled', !i);\n                    }\n                    catch (err) {\n                        console.warn(err);\n                    }\n                },\n            });\n            this._palette.addItem({ command, category: ALL_PALETTE });\n        });\n    }\n    fontPropMenu(parent, kind, property) {\n        let menu = new Menu({ commands: parent.commands });\n        menu.title.label = TEXT_LABELS[property];\n        menu.addItem({ command: `${kind}-${property}:-reset` });\n        menu.addItem({ type: 'separator' });\n        parent.addItem({ type: 'submenu', submenu: menu });\n        return menu;\n    }\n    makeMenus(commands) {\n        this._menu = new Menu({ commands });\n        this._menu.title.label = 'Fonts';\n        [TextKind.code, TextKind.content, TextKind.ui].map((kind) => {\n            const submenu = new Menu({ commands });\n            submenu.title.label = KIND_LABELS[kind];\n            this._menu.addItem({ type: 'submenu', submenu });\n            if (CSS[kind]['font-family']) {\n                this._fontFamilyMenus.set(kind, this.fontPropMenu(submenu, kind, 'font-family'));\n            }\n            if (CSS[kind]['font-size']) {\n                this._fontSizeMenus.set(kind, this.fontPropMenu(submenu, kind, 'font-size'));\n            }\n            if (CSS[kind]['line-height']) {\n                this._lineHeightMenus.set(kind, this.fontPropMenu(submenu, kind, 'line-height'));\n            }\n        });\n        this._menu.addItem({\n            command: CMD.editFonts,\n            args: { global: true },\n        });\n        this._menu.addItem({\n            command: CMD.customFonts.enable,\n        });\n        this._menu.addItem({\n            command: CMD.customFonts.disable,\n        });\n    }\n    async settingsUpdate() {\n        let meta = {\n            styles: this._settings.get('styles').composite,\n        };\n        if (this.enabled && meta.styles && Object.keys(meta.styles).length) {\n            await this.ensureJss();\n            this._stylist.stylesheet(meta);\n        }\n        else {\n            this._stylist.hack(false);\n        }\n    }\n    async ensureJss() {\n        await this._stylist.ensureJss();\n    }\n    registerFontCommands(options) {\n        [TextKind.code, TextKind.content, TextKind.ui].forEach((kind) => {\n            var _a;\n            const slug = options.name.replace(/[^a-z\\d]/gi, '-').toLowerCase();\n            let command = `${CMD[kind].fontFamily}:${slug}`;\n            this._commands.addCommand(command, {\n                label: options.name,\n                isToggled: () => {\n                    let cff = this.getTextStyle('font-family', { kind });\n                    return `${cff}`.indexOf(`'${options.name}'`) > -1;\n                },\n                isVisible: () => this.enabled,\n                execute: async () => {\n                    try {\n                        await this.setTextStyle('font-family', `'${options.name}'`, {\n                            kind,\n                        });\n                    }\n                    catch (err) {\n                        console.warn(err);\n                    }\n                },\n            });\n            (_a = this._fontFamilyMenus.get(kind)) === null || _a === void 0 ? void 0 : _a.addItem({ command });\n            this._palette.addItem({ command, category: PALETTE[kind] });\n        });\n    }\n    requestLicensePane(font) {\n        this.licensePaneRequested.emit(font);\n    }\n    hack() {\n        this._stylist.hack();\n        this._ready.resolve(void 0);\n    }\n}\n//# sourceMappingURL=manager.js.map","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./editor.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./editor.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Dialog, showDialog, VDomModel, VDomRenderer } from '@jupyterlab/apputils';\nimport * as React from 'react';\nimport * as compat from './labcompat';\nimport { TextKind, TEXT_OPTIONS, TEXT_LABELS, KIND_LABELS, PACKAGE_NAME, } from './tokens';\nimport '../style/editor.css';\nconst h = React.createElement;\nconst EDITOR_CLASS = 'jp-FontsEditor';\nconst ENABLED_CLASS = 'jp-FontsEditor-enable';\nconst FIELD_CLASS = 'jp-FontsEditor-field';\nconst EMBED_CLASS = 'jp-FontsEditor-embed';\nconst SECTION_CLASS = 'lm-CommandPalette-header';\nconst BUTTON_CLASS = 'jp-FontsEditor-button jp-mod-styled';\nconst SIZE_CLASS = 'jp-FontsEditor-size';\nconst DUMMY = '-';\nexport class FontEditorModel extends VDomModel {\n    get fonts() {\n        return this._fonts;\n    }\n    set fonts(fonts) {\n        if (this._fonts && this._fonts.settings) {\n            this._fonts.settings.changed.disconnect(this.onSettingsChange, this);\n        }\n        this._fonts = fonts;\n        fonts.settings.changed.connect(this.onSettingsChange, this);\n        this.stateChanged.emit(void 0);\n    }\n    onSettingsChange() {\n        this.stateChanged.emit(void 0);\n    }\n    get notebook() {\n        return this._notebook;\n    }\n    set notebook(notebook) {\n        var _a, _b;\n        if ((_a = this._notebook) === null || _a === void 0 ? void 0 : _a.model) {\n            compat\n                .metadataSignal(this._notebook.model)\n                .disconnect(this.onSettingsChange, this);\n            this._notebook.context.pathChanged.disconnect(this.onSettingsChange, this);\n        }\n        this._notebook = notebook;\n        if ((_b = this._notebook) === null || _b === void 0 ? void 0 : _b.model) {\n            compat.metadataSignal(this._notebook.model).connect(this.onSettingsChange, this);\n            this._notebook.context.pathChanged.connect(this.onSettingsChange, this);\n        }\n        this.stateChanged.emit(void 0);\n    }\n    get enabled() {\n        return this._fonts.enabled;\n    }\n    async setEnabled(enabled) {\n        if (this.notebook == null) {\n            await this._fonts.settings.set('enabled', enabled);\n            this.stateChanged.emit(void 0);\n        }\n    }\n    get notebookMetadata() {\n        var _a;\n        if ((_a = this.notebook) === null || _a === void 0 ? void 0 : _a.model) {\n            return compat.getPanelMetadata(this.notebook.model, PACKAGE_NAME);\n        }\n    }\n    clearNotebookMetadata(fontName) {\n        var _a;\n        let meta = this.notebookMetadata;\n        if (fontName) {\n            if (meta === null || meta === void 0 ? void 0 : meta.fonts) {\n                delete meta.fonts[fontName];\n            }\n            if (meta === null || meta === void 0 ? void 0 : meta.fontLicenses) {\n                delete meta.fontLicenses[fontName];\n            }\n        }\n        if ((_a = this.notebook) === null || _a === void 0 ? void 0 : _a.model) {\n            compat.setPanelMetadata(this.notebook.model, PACKAGE_NAME, JSON.parse(JSON.stringify(meta)));\n        }\n        this.stateChanged.emit(void 0);\n    }\n    dispose() {\n        if (this._fonts && this._fonts.settings) {\n            this._fonts.settings.changed.disconnect(this.onSettingsChange, this);\n        }\n        super.dispose();\n    }\n}\nexport class FontEditor extends VDomRenderer {\n    constructor() {\n        super(new FontEditorModel());\n        this.addClass(EDITOR_CLASS);\n    }\n    render() {\n        const m = this.model;\n        if (!m) {\n            return h('div', { key: 'empty' });\n        }\n        return h('div', { key: 'editor' }, [\n            ...this.header(),\n            ...[TextKind.code, TextKind.content].map((kind) => h('section', { key: `${kind}-section`, title: KIND_LABELS[kind] }, [\n                h('h3', { key: `${kind}-header`, className: SECTION_CLASS }, KIND_LABELS[kind]),\n                ...['font-family', 'font-size', 'line-height'].map((prop) => this.textSelect(prop, kind, { key: `${kind}-${prop}` })),\n            ])),\n            ...[TextKind.ui].map((kind) => h('section', { key: `${kind}-section`, title: KIND_LABELS[kind] }, [\n                h('h3', { key: `${kind}-header`, className: SECTION_CLASS }, KIND_LABELS[kind]),\n                ...['font-family'].map((prop) => this.textSelect(prop, kind, { key: `${kind}-${prop}` })),\n            ])),\n        ]);\n    }\n    fontFaceExtras(m, fontFamily) {\n        let font;\n        let unquoted = `${fontFamily}`.slice(1, -1);\n        if (m.fonts.fonts.get(unquoted)) {\n            font = m.fonts.fonts.get(unquoted);\n        }\n        return !font ? [] : [this.licenseButton(m, font)];\n    }\n    licenseButton(m, font) {\n        return h('button', {\n            className: BUTTON_CLASS,\n            title: font.license.name,\n            key: font.name,\n            onClick: () => m.fonts.requestLicensePane(font),\n        }, font.license.spdx);\n    }\n    textSelect(prop, kind, sectionProps) {\n        const m = this.model;\n        const onChange = (evt) => {\n            let value = evt.target.value;\n            value = value === DUMMY ? null : value;\n            m.fonts\n                .setTextStyle(prop, value, Object.assign({ kind }, (m.notebook ? { notebook: m.notebook } : {})))\n                .catch(console.warn);\n        };\n        const value = m.fonts.getTextStyle(prop, {\n            kind,\n            notebook: m.notebook || void 0,\n        });\n        const extra = prop === 'font-family' ? this.fontFaceExtras(m, value) : [];\n        return h('div', Object.assign({ className: FIELD_CLASS, key: 'select-field' }, sectionProps), [\n            h('label', { key: 'select-label' }, TEXT_LABELS[prop]),\n            h('div', { key: 'select-wrap' }, [\n                ...extra,\n                h('select', {\n                    className: 'jp-mod-styled',\n                    title: `${TEXT_LABELS[prop]}`,\n                    onChange,\n                    defaultValue: value || DUMMY,\n                    key: `select`,\n                }, [null, ...TEXT_OPTIONS[prop](m.fonts)].map((value) => {\n                    return h('option', {\n                        key: `'${value}'`,\n                        value: value == null ? DUMMY : prop === 'font-family' ? `'${value}'` : value,\n                    }, `${value || DUMMY}`);\n                })),\n            ]),\n        ]);\n    }\n    deleteButton(m, fontName) {\n        return h('button', {\n            className: BUTTON_CLASS,\n            title: `Delete Embedded Font`,\n            key: 'delete',\n            onClick: async () => {\n                const result = await showDialog({\n                    title: `Delete Embedded Font from Notebook`,\n                    body: `If you dont have ${fontName} installed, you might not be able to re-embed it`,\n                    buttons: [Dialog.cancelButton(), Dialog.warnButton({ label: 'DELETE' })],\n                });\n                if (result.button.accept) {\n                    m.clearNotebookMetadata(fontName);\n                }\n            },\n        }, 'Delete');\n    }\n    enabler(m) {\n        const onChange = async (evt) => {\n            await m.setEnabled(!!evt.currentTarget.checked);\n        };\n        return h('label', { key: 'enable-label' }, h('span', { key: 'enable-text' }, 'Enabled'), h('input', {\n            key: 'enable-input',\n            type: 'checkbox',\n            checked: m.enabled,\n            onChange,\n        }));\n    }\n    embeddedFont(m, fontName) {\n        var _a;\n        if (((_a = m.notebookMetadata) === null || _a === void 0 ? void 0 : _a.fonts) == null || m.notebookMetadata.fontLicenses == null) {\n            return null;\n        }\n        const faces = m.notebookMetadata.fonts[fontName];\n        const license = m.notebookMetadata.fontLicenses[fontName];\n        const size = (faces || []).reduce((memo, face) => memo + `${face.src}`.length, license.text.length);\n        const kb = parseInt(`${size / 1024}`, 10);\n        return h('li', { key: fontName }, [\n            h('label', { key: 'label' }, fontName),\n            this.licenseButton(m, {\n                name: fontName,\n                license: {\n                    name: license.name,\n                    spdx: license.spdx,\n                    text: async () => license.text,\n                    holders: license.holders,\n                },\n                faces: async () => faces || [],\n            }),\n            h('span', { className: SIZE_CLASS, key: 'font-kb' }, `${kb} kb`),\n            this.deleteButton(m, fontName),\n        ]);\n    }\n    header() {\n        var _a;\n        const m = this.model;\n        const title = m.notebook\n            ? (_a = m.notebook.context.contentsModel) === null || _a === void 0 ? void 0 : _a.name.replace(/.ipynb$/, '')\n            : 'Global';\n        this.title.label = title || 'Unknown';\n        const h2 = h('h2', { key: 'scope-head' }, [\n            h('label', { key: 'scope-label' }, `Fonts  ${title}`),\n            ...(m.notebook\n                ? [h('div', { className: 'jp-NotebookIcon', key: 'scope-icon' })]\n                : []),\n        ]);\n        if (m.notebook != null) {\n            return [\n                h2,\n                h('section', { key: 'embed-section' }, [\n                    h('h3', { className: SECTION_CLASS, key: 'embed-head' }, 'Embedded fonts'),\n                    h('ul', { className: EMBED_CLASS, key: 'embeds' }, Object.keys((m.notebookMetadata || {}).fonts || {}).map((fontName) => {\n                        return this.embeddedFont(m, fontName);\n                    })),\n                ]),\n            ];\n        }\n        else {\n            return [\n                h2,\n                h('section', { key: 'enable-section', className: ENABLED_CLASS }, [\n                    h('h3', { className: SECTION_CLASS, key: 'enable-header' }, 'Enable/Disable All Fonts'),\n                    this.enabler(m),\n                ]),\n            ];\n        }\n    }\n}\n//# sourceMappingURL=editor.js.map","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { ILabShell, } from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\nimport { IMainMenu } from '@jupyterlab/mainmenu';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { NotebookFontsButton } from './button';\nimport { FontEditor } from './editor';\nimport { ICONS } from './icons';\nimport { LicenseViewer } from './license';\nimport { FontManager } from './manager';\nimport { IFontManager, PACKAGE_NAME, CMD } from './tokens';\nimport '../style/index.css';\nconst PLUGIN_ID = `${PACKAGE_NAME}:fonts`;\nlet licenseId = 0;\nconst plugin = {\n    id: PLUGIN_ID,\n    autoStart: true,\n    requires: [IMainMenu, ISettingRegistry, ICommandPalette, INotebookTracker],\n    optional: [ILabShell],\n    provides: IFontManager,\n    activate: function (app, menu, settingRegistry, palette, notebooks, labShell) {\n        const manager = new FontManager(app.commands, palette, notebooks);\n        const area = labShell ? 'main' : 'right';\n        manager.licensePaneRequested.connect((it, font) => {\n            let license = new LicenseViewer({ font });\n            license.id = `jp-fonts-license-${licenseId++}`;\n            license.title.label = font.name;\n            license.title.closable = true;\n            license.title.icon = ICONS.license;\n            app.shell.add(license, area);\n            app.shell.activateById(license.id);\n        });\n        menu.settingsMenu.addGroup([{ type: 'submenu', submenu: manager.menu }]);\n        app.commands.addCommand(CMD.editFonts, {\n            label: 'Global Fonts...',\n            execute: (args) => {\n                const editor = new FontEditor();\n                const { model } = editor;\n                model.fonts = manager;\n                editor.title.icon = ICONS.fonts;\n                editor.title.closable = true;\n                if ((args || {})['global']) {\n                    editor.title.label = 'Global';\n                    editor.id = 'font-editor-global';\n                }\n                else {\n                    const { currentWidget } = notebooks;\n                    if (currentWidget == null) {\n                        return;\n                    }\n                    model.notebook = currentWidget;\n                    editor.id = `font-editor-${model.notebook.id}`;\n                    model.notebook.disposed.connect(() => editor.dispose());\n                }\n                app.shell.add(editor, area, { mode: 'split-right' });\n                app.shell.activateById(editor.id);\n            },\n        });\n        const fontsButton = new NotebookFontsButton();\n        fontsButton.widgetRequested.connect(async () => {\n            try {\n                await app.commands.execute(CMD.editFonts);\n            }\n            catch (err) {\n                console.warn(err);\n            }\n        });\n        app.docRegistry.addWidgetExtension('Notebook', fontsButton);\n        Promise.all([settingRegistry.load(PLUGIN_ID), app.restored])\n            .then(async ([settings]) => {\n            manager.settings = settings;\n            settingRegistry\n                .load('@jupyterlab/apputils-extension:themes')\n                .then((settings) => {\n                settings.changed.connect(() => {\n                    setTimeout(() => manager.hack(), 100);\n                });\n            })\n                .catch(console.warn);\n        })\n            .catch((reason) => {\n            console.error(reason);\n        });\n        return manager;\n    },\n};\nexport default plugin;\n//# sourceMappingURL=plugin.js.map","import { PathExt, PageConfig, URLExt } from '@jupyterlab/coreutils';\nimport { JSONExt, PromiseDelegate } from '@lumino/coreutils';\nimport { Debouncer } from '@lumino/polling';\nimport { Signal } from '@lumino/signaling';\nimport * as compat from './labcompat';\nimport { ROOT, DOM, PACKAGE_NAME } from './tokens';\nconst RE_CSS_IMPORT = /^@import(.*$)/;\nconst RE_CSS_REL_URL = /url\\(\\s*['\"]?(\\.[^\\)'\"]+)['\"]?\\s*\\)/g;\nexport class Stylist {\n    constructor() {\n        this.fonts = new Map();\n        this._notebookStyles = new Map();\n        this._transientNotebookStyles = new Map();\n        this._fontCache = new Map();\n        this._cacheUpdated = new Signal(this);\n        this._cellStyleCache = new Map();\n        this._notebookCellCount = new Map();\n        this._globalStyles = document.createElement('style');\n        this._globalStyles.classList.add(DOM.sheet);\n        this._globalStyles.classList.add(DOM.modGlobal);\n        this._notebookContentDebouncer = new Debouncer(async (notebook) => {\n            await this._onNotebookModelContentChanged(notebook);\n        }, 100);\n    }\n    get cacheUpdated() {\n        return this._cacheUpdated;\n    }\n    registerNotebook(panel, register) {\n        if (register) {\n            const sheet = document.createElement('style');\n            this._notebookStyles.set(panel, sheet);\n            sheet.classList.add(DOM.sheet);\n            sheet.classList.add(DOM.modNotebook);\n            panel.content.modelContentChanged.connect(this._debouncedNotebookContentChanged, this);\n            panel.disposed.connect(this._onDisposed, this);\n            this._onNotebookModelContentChanged(panel.content)\n                .then(() => this.hack())\n                .catch(console.warn);\n            this.hack();\n        }\n        else {\n            this._onDisposed(panel);\n        }\n    }\n    async ensureJss() {\n        if (!this._jss) {\n            this._jss = await Private.ensureJSS();\n        }\n    }\n    _debouncedNotebookContentChanged(notebook) {\n        this._notebookContentDebouncer.invoke(notebook).catch(console.warn);\n    }\n    /** hoist cell metadata to data attributes */\n    async _onNotebookModelContentChanged(notebook) {\n        const newCellCount = notebook.widgets.length;\n        const oldCellCount = this._notebookCellCount.get(notebook) || -1;\n        let needsUpdate = newCellCount !== oldCellCount;\n        for (const cell of notebook.widgets) {\n            cell.node.dataset.jpfCellId = cell.model.id;\n            let tags = [\n                ...(compat.getCellMetadata(cell.model, 'tags') ||\n                    JSONExt.emptyArray),\n            ];\n            if (tags && tags.length) {\n                tags.sort();\n                cell.node.dataset.jpfCellTags = `,${tags.join(',')},`;\n            }\n            else {\n                delete cell.node.dataset.jpfCellTags;\n            }\n            const meta = compat.getCellMetadata(cell.model, PACKAGE_NAME) || JSONExt.emptyObject;\n            const cached = this._cellStyleCache.get(cell.model.id) || JSONExt.emptyObject;\n            if (!JSONExt.deepEqual(meta, cached)) {\n                needsUpdate = true;\n            }\n            this._cellStyleCache.set(cell.model.id, meta);\n        }\n        if (!needsUpdate) {\n            return;\n        }\n        await this.ensureJss();\n        this.stylesheet(notebook.model\n            ? compat.getPanelMetadata(notebook.model, PACKAGE_NAME)\n            : null, notebook.parent);\n        this._notebookCellCount.set(notebook, newCellCount);\n    }\n    _onDisposed(panel) {\n        var _a;\n        if (this._notebookStyles.has(panel)) {\n            (_a = this._notebookStyles.get(panel)) === null || _a === void 0 ? void 0 : _a.remove();\n            this._notebookStyles.delete(panel);\n            panel.disposed.disconnect(this._onDisposed, this);\n            panel.content.modelContentChanged.disconnect(this._debouncedNotebookContentChanged, this);\n        }\n        if (this._notebookCellCount.has(panel.content)) {\n            this._notebookCellCount.delete(panel.content);\n        }\n    }\n    get stylesheets() {\n        return [this._globalStyles, ...Array.from(this._notebookStyles.values())];\n    }\n    notebooks() {\n        return Array.from(this._notebookStyles.keys());\n    }\n    setTransientNotebookStyle(panel, style) {\n        if (style == null) {\n            this._transientNotebookStyles.delete(panel);\n        }\n        else {\n            this._transientNotebookStyles.set(panel, style);\n        }\n        const meta = panel.model\n            ? compat.getPanelMetadata(panel.model, PACKAGE_NAME)\n            : null;\n        this.stylesheet(meta, panel);\n    }\n    getTransientNotebookStyle(panel) {\n        return this._transientNotebookStyles.get(panel) || null;\n    }\n    stylesheet(meta, panel) {\n        if (!this._jss) {\n            console.error('JSS not loaded yet');\n            return;\n        }\n        let sheet = panel ? this._notebookStyles.get(panel) : this._globalStyles;\n        let style = null;\n        let jss = null;\n        let css = '';\n        if (meta) {\n            style = panel ? this._nbMetaToStyle(meta, panel) : this._settingsToStyle(meta);\n            jss = this._jss.createStyleSheet(style);\n            css = jss.toString();\n        }\n        if (panel) {\n            let transientMeta = this.getTransientNotebookStyle(panel);\n            if (transientMeta) {\n                style = this._nbMetaToStyle(transientMeta, panel);\n                jss = this._jss.createStyleSheet(style);\n                css = `${css.trim()}\\n${jss.toString()}`;\n            }\n            for (const cell of panel.content.widgets) {\n                let cellMeta = compat.getCellMetadata(cell.model, PACKAGE_NAME) ||\n                    JSONExt.emptyObject;\n                style = this._nbMetaToStyle(cellMeta, panel, cell);\n                jss = this._jss.createStyleSheet(style);\n                css = `${css.trim()}\\n${jss.toString()}`;\n            }\n        }\n        css = this._normalizeCSS(css, panel);\n        if (sheet && sheet.textContent !== css) {\n            sheet.textContent = css;\n        }\n        this.hack();\n    }\n    _normalizeCSS(css, panel) {\n        const lines = css.split('\\n');\n        const finalLines = [];\n        const imports = [];\n        let localPath = (panel === null || panel === void 0 ? void 0 : panel.context.localPath) || null;\n        if (localPath) {\n            localPath = URLExt.join(PageConfig.getBaseUrl(), 'files', PathExt.dirname(localPath));\n        }\n        let line;\n        for (line of lines) {\n            if (localPath != null) {\n                line = line.replace(RE_CSS_REL_URL, `url('${localPath}/$1')`);\n            }\n            let importMatch = line.match(RE_CSS_IMPORT);\n            if (importMatch) {\n                imports.push(line);\n            }\n            else {\n                finalLines.push(line);\n            }\n        }\n        return [...imports, ...finalLines].join('\\n');\n    }\n    _nbMetaToStyle(meta, panel, cell = null) {\n        let jss = { '@font-face': [], '@global': {}, '@import': [] };\n        let selector = `.${DOM.notebookPanel}[id='${panel.id}']`;\n        if (cell) {\n            selector = `${selector} .${DOM.cell}[data-jpf-cell-id=\"${cell.model.id}\"]`;\n        }\n        let idStyles = (jss['@global'][selector] = {});\n        if (meta.fonts) {\n            for (let fontFamily in meta.fonts) {\n                jss['@font-face'] = jss['@font-face'].concat(meta.fonts[fontFamily]);\n            }\n        }\n        let styles = meta.styles || JSONExt.emptyObject;\n        for (let kv of Object.entries(styles)) {\n            let [k, v] = kv;\n            switch (k) {\n                case '@import':\n                case '@font-face':\n                    jss[k].push(...(Array.isArray(v) ? v : [v]));\n                    break;\n                default:\n                    if (k === ROOT) {\n                        for (let rootK in v) {\n                            if (styles == null || v == null) {\n                                continue;\n                            }\n                            idStyles[rootK] = v[rootK];\n                        }\n                    }\n                    else if (typeof v === 'object') {\n                        idStyles[`& ${k}`] = v;\n                    }\n                    else {\n                        idStyles[k] = v;\n                    }\n                    break;\n            }\n        }\n        return jss;\n    }\n    _settingsToStyle(meta) {\n        let raw = JSON.stringify(meta.styles);\n        let styles = JSON.parse(raw);\n        let faces = {};\n        let imports = [];\n        for (let font of Array.from(this.fonts.keys())) {\n            if (raw.indexOf(`'${font}'`) > -1 && !faces[font]) {\n                const cachedFont = this._fontCache.get(font);\n                if (cachedFont != null) {\n                    faces[font] = cachedFont;\n                }\n                else {\n                    new Promise((resolve, reject) => {\n                        const options = this.fonts.get(font);\n                        if (options == null) {\n                            reject();\n                            return;\n                        }\n                        else {\n                            options\n                                .faces()\n                                .then((faces) => {\n                                if (this._fontCache.has(font)) {\n                                    return;\n                                }\n                                this._fontCache.set(font, faces);\n                                this._cacheUpdated.emit(void 0);\n                                resolve(void 0);\n                            })\n                                .catch(reject);\n                        }\n                    }).catch(console.warn);\n                }\n            }\n        }\n        let flatFaces = Object.keys(faces).reduce((m, face) => {\n            const foundFaces = faces[face];\n            if (faces && foundFaces != null) {\n                return m.concat(foundFaces);\n            }\n        }, []);\n        let styleFaces = [];\n        let globalStyles = {};\n        for (let kv of Object.entries(styles)) {\n            let [k, v] = kv;\n            switch (k) {\n                case '@import':\n                    imports.push(...(Array.isArray(v) ? v : [v]));\n                    break;\n                case '@font-face':\n                    styleFaces.push(...(Array.isArray(v) ? v : [v]));\n                    break;\n                default:\n                    globalStyles[k] = v;\n                    break;\n            }\n        }\n        return {\n            '@global': globalStyles,\n            '@font-face': [...flatFaces, ...styleFaces],\n            '@import': imports,\n        };\n    }\n    dispose() {\n        this._globalStyles.remove();\n        for (let notebook of Array.from(this._notebookStyles.keys())) {\n            this._onDisposed(notebook);\n        }\n    }\n    hack(show = true) {\n        if (show) {\n            setTimeout(() => this.stylesheets.map((s) => {\n                document.body.appendChild(s);\n            }), 0);\n        }\n        else {\n            this.stylesheets.map((el) => el.remove());\n        }\n    }\n}\nvar Private;\n(function (Private) {\n    let _jss;\n    let _loading;\n    async function ensureJSS() {\n        if (_jss) {\n            return _jss;\n        }\n        if (!_loading) {\n            _loading = new PromiseDelegate();\n            const [jss, jssPresetDefault] = await Promise.all([\n                import('jss'),\n                import('jss-preset-default'),\n            ]);\n            _jss = jss.create(jssPresetDefault.default());\n            _loading.resolve(_jss);\n        }\n        return _loading.promise;\n    }\n    Private.ensureJSS = ensureJSS;\n})(Private || (Private = {}));\n//# sourceMappingURL=stylist.js.map","import { Token } from '@lumino/coreutils';\nexport var TextKind;\n(function (TextKind) {\n    TextKind[\"code\"] = \"code\";\n    TextKind[\"content\"] = \"content\";\n    TextKind[\"ui\"] = \"ui\";\n})(TextKind || (TextKind = {}));\nexport const KIND_LABELS = {\n    code: 'Code',\n    content: 'Content',\n    ui: 'UI',\n};\nexport var FontFormat;\n(function (FontFormat) {\n    FontFormat[\"woff2\"] = \"woff2\";\n    FontFormat[\"woff\"] = \"woff\";\n})(FontFormat || (FontFormat = {}));\nexport const FONT_FORMATS = {\n    woff2: 'font/woff2',\n    woff: 'font/woff',\n};\nexport const CMD = {\n    code: {\n        fontSize: 'code-font-size',\n        fontFamily: 'code-font-family',\n        lineHeight: 'code-line-height',\n    },\n    content: {\n        fontSize: 'content-font-size',\n        fontFamily: 'content-font-family',\n        lineHeight: 'content-line-height',\n    },\n    ui: {\n        fontFamily: 'ui-font-family',\n    },\n    editFonts: 'font-editor:open',\n    customFonts: {\n        disable: 'custom-fonts:disable',\n        enable: 'custom-fonts:enable',\n    },\n};\nexport const ROOT = ':root';\nexport const CSS = {\n    code: {\n        'font-family': '--jp-code-font-family',\n        'font-size': '--jp-code-font-size',\n        'line-height': '--jp-code-line-height',\n    },\n    content: {\n        'font-family': '--jp-content-font-family',\n        'font-size': '--jp-content-font-size1',\n        'line-height': '--jp-content-line-height',\n    },\n    ui: {\n        'font-family': '--jp-ui-font-family',\n    },\n};\nexport var DOM;\n(function (DOM) {\n    DOM.sheet = 'jp-Fonts-Sheet';\n    DOM.modGlobal = 'jp-fonts-mod-global';\n    DOM.modNotebook = 'jp-fonts-mod-notebook';\n    DOM.notebookPanel = 'jp-NotebookPanel';\n    DOM.cell = 'jp-Cell';\n})(DOM || (DOM = {}));\nexport const TEXT_OPTIONS = {\n    'font-size': (_m) => Array.from(Array(25).keys()).map((i) => `${i + 8}px`),\n    'line-height': (_m) => Array.from(Array(8).keys()).map((i) => `${i * 0.25 + 1}`),\n    'font-family': (m) => {\n        let names = Array.from(m.fonts.values()).reduce((memo, f) => {\n            return memo.concat(f.name);\n        }, []);\n        names.sort((a, b) => a.localeCompare(b));\n        return names;\n    },\n};\nexport const TEXT_LABELS = {\n    'font-size': 'Size',\n    'line-height': 'Line Height',\n    'font-family': 'Font',\n};\nexport const DEFAULT = {\n    code: {\n        fontSize: '13px',\n        lineHeight: '1',\n        fontFamily: '\"Source Code Pro\", monospace',\n    },\n};\nexport const PACKAGE_NAME = '@deathbeds/jupyterlab-fonts';\nexport const CONFIGURED_CLASS = 'jp-fonts-configured';\nexport const IFontManager = new Token('@deathbeds/jupyterlab-fonts:IFontManager');\n//# sourceMappingURL=tokens.js.map","import { FONT_FORMATS, FontFormat, IFontManager, } from './tokens';\n/* below from https://gist.github.com/viljamis/c4016ff88745a0846b94 */\nconst CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nexport function base64Encode(str) {\n    let out = '';\n    let i = 0;\n    let len = str.length;\n    let c1;\n    let c2;\n    let c3;\n    while (i < len) {\n        c1 = str.charCodeAt(i++) & 0xff;\n        if (i === len) {\n            out += CHARS.charAt(c1 >> 2);\n            out += CHARS.charAt((c1 & 0x3) << 4);\n            out += '==';\n            break;\n        }\n        c2 = str.charCodeAt(i++);\n        if (i === len) {\n            out += CHARS.charAt(c1 >> 2);\n            out += CHARS.charAt(((c1 & 0x3) << 4) | ((c2 & 0xf0) >> 4));\n            out += CHARS.charAt((c2 & 0xf) << 2);\n            out += '=';\n            break;\n        }\n        c3 = str.charCodeAt(i++);\n        out += CHARS.charAt(c1 >> 2);\n        out += CHARS.charAt(((c1 & 0x3) << 4) | ((c2 & 0xf0) >> 4));\n        out += CHARS.charAt(((c2 & 0xf) << 2) | ((c3 & 0xc0) >> 6));\n        out += CHARS.charAt(c3 & 0x3f);\n    }\n    return out;\n}\nexport async function dataURISrc(url, format = FontFormat.woff2) {\n    const pre = `data:${FONT_FORMATS[format]};charset=utf-8;base64`;\n    const base64Font = base64Encode(await getBinary(url));\n    const post = `format('${format}')`;\n    const src = `url('${pre},${base64Font}') ${post}`;\n    return src;\n}\nexport function getBinary(url) {\n    return new Promise((resolve, reject) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.overrideMimeType('text/plain; charset=x-user-defined');\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                resolve(xhr.responseText);\n            }\n        };\n        xhr.send();\n    });\n}\nexport async function makeFace(options) {\n    return Object.assign(Object.assign({}, options.primitive), { 'font-family': `${options.name} ${options.variant}`, src: await dataURISrc((await options.woff2()).default, FontFormat.woff2) });\n}\n/**\n * Create an simple JupyterFrontEnd plugin for providing a font.\n *\n * This will lazily load its font assets when needed.\n */\nexport function makePlugin(options) {\n    const plugin = {\n        id: options.id,\n        autoStart: true,\n        requires: [IFontManager],\n        activate: (app, fonts) => {\n            fonts.ready\n                .then(async () => {\n                const variants = await options.variants();\n                for (const [variant, faces] of Object.entries(variants)) {\n                    fonts.registerFontFace({\n                        name: `${options.fontName} ${variant}`.trim(),\n                        license: Object.assign(Object.assign({}, options.license), { text: async () => await options.licenseText() }),\n                        faces: async () => {\n                            const promises = [];\n                            for (const face of faces) {\n                                promises.push(makeFace({\n                                    name: options.fontName,\n                                    variant,\n                                    woff2: face.woff2,\n                                    primitive: face.style || {},\n                                }));\n                            }\n                            try {\n                                return await Promise.all(promises);\n                            }\n                            catch (err) {\n                                console.warn(err);\n                                return [];\n                            }\n                        },\n                    });\n                }\n            })\n                .catch(console.warn);\n        },\n    };\n    return plugin;\n}\n//# sourceMappingURL=util.js.map"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","NotebookFontsButton","constructor","widgetRequested","Signal","createNew","panel","context","button","ToolbarButton","icon","fonts","onClick","emit","tooltip","metaUpdated","model","addClass","removeClass","panelModel","connect","toolbar","insertItem","DisposableDelegate","disconnect","dispose","ICONS","LabIcon","name","svgstr","license","metadataSignal","_a","metadata","changed","sharedModel","metadataChanged","getPanelMetadata","key","get","getMetadata","console","error","setPanelMetadata","value","set","setMetadata","getCellMetadata","cellModel","setCellMetadata","deleteCellMetadata","delete","deleteMetadata","locals","LicenseViewer","VDomRenderer","super","Model","render","m","text","licenseText","className","font","VDomModel","_font","stateChanged","_licenseTextPromise","Promise","resolve","reject","then","_licenseText","catch","err","licenseTextPromise","PALETTE","code","ui","FontManager","commands","palette","notebooks","licensePaneRequested","_fontFamilyMenus","Map","_fontSizeMenus","_lineHeightMenus","_ready","PromiseDelegate","_stylist","cacheUpdated","settingsUpdate","_commands","_palette","_notebooks","currentChanged","_onNotebooksChanged","makeMenus","makeCommands","hack","ready","promise","enabled","settings","_settings","composite","warn","menu","_menu","stylesheets","setTransientNotebookStyle","getTransientNotebookStyle","dataURISrc","url","format","woff2","registerFontFace","registerFontCommands","getVarName","property","kind","getTextStyle","notebook","styles","varName","rootStyle","setTextStyle","oldStyles","user","parse","root","embedFont","cleanMetadata","Object","keys","rawStyle","oldFonts","fontFamily","pattern","indexOf","fontLicenses","unquoted","replace","registered","faces","oldFaces","oldLicenses","spdx","holders","styled","forEach","_registerNotebook","registerNotebook","watcher","_notebookMetaWatcher","disposed","_onNotebookDisposed","async","meta","ensureJss","stylesheet","fontSizeOptions","Array","from","fontSizeCommands","prefix","px","sizeCmd","fontSize","label","command","toLowerCase","addCommand","execute","oldSize","cfs","parseInt","isVisible","addItem","category","rank","prop","isToggled","lineHeight","cmd","fontPropMenu","parent","Menu","title","type","submenu","editFonts","args","global","customFonts","enable","disable","slug","requestLicensePane","h","SECTION_CLASS","BUTTON_CLASS","DUMMY","FontEditorModel","_fonts","onSettingsChange","_notebook","_b","pathChanged","setEnabled","notebookMetadata","clearNotebookMetadata","fontName","FontEditor","header","textSelect","fontFaceExtras","slice","licenseButton","sectionProps","extra","assign","onChange","evt","defaultValue","deleteButton","showDialog","body","buttons","Dialog","cancelButton","warnButton","accept","enabler","checked","currentTarget","embeddedFont","size","reduce","face","src","kb","contentsModel","h2","PLUGIN_ID","licenseId","autoStart","requires","IMainMenu","ISettingRegistry","ICommandPalette","INotebookTracker","optional","ILabShell","provides","activate","app","settingRegistry","labShell","manager","area","it","closable","shell","add","activateById","settingsMenu","addGroup","editor","currentWidget","mode","fontsButton","docRegistry","addWidgetExtension","all","load","restored","setTimeout","reason","RE_CSS_IMPORT","RE_CSS_REL_URL","Stylist","_notebookStyles","_transientNotebookStyles","_fontCache","_cacheUpdated","_cellStyleCache","_notebookCellCount","_globalStyles","classList","sheet","modGlobal","_notebookContentDebouncer","Debouncer","_onNotebookModelContentChanged","register","modNotebook","modelContentChanged","_debouncedNotebookContentChanged","_onDisposed","_jss","Private","ensureJSS","invoke","newCellCount","widgets","needsUpdate","cell","node","dataset","jpfCellId","tags","JSONExt","emptyArray","sort","jpfCellTags","emptyObject","cached","deepEqual","has","values","jss","_nbMetaToStyle","_settingsToStyle","createStyleSheet","transientMeta","trim","cellMeta","_normalizeCSS","textContent","lines","split","finalLines","imports","line","localPath","URLExt","PageConfig","getBaseUrl","PathExt","dirname","match","selector","notebookPanel","idStyles","kv","entries","v","isArray","rootK","raw","cachedFont","flatFaces","foundFaces","styleFaces","globalStyles","show","s","el","_loading","jssPresetDefault","create","default","TextKind","KIND_LABELS","FontFormat","FONT_FORMATS","woff","CMD","ROOT","CSS","DOM","TEXT_OPTIONS","_m","names","f","a","b","localeCompare","TEXT_LABELS","DEFAULT","PACKAGE_NAME","CONFIGURED_CLASS","IFontManager","Token","CHARS","base64Encode","str","c1","c2","c3","out","len","charCodeAt","charAt","getBinary","xhr","XMLHttpRequest","open","overrideMimeType","onreadystatechange","readyState","status","responseText","send","makeFace","primitive","variant","makePlugin","variants","promises"],"sourceRoot":""}