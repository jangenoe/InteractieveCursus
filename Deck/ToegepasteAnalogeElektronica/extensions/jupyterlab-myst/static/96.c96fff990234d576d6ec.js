"use strict";(self.webpackChunkjupyterlab_myst=self.webpackChunkjupyterlab_myst||[]).push([[96],{7064:(e,t,n)=>{n.d(t,{ZP:()=>s});const r=/^10.\d{4,9}\/[-._;()/:A-Z0-9]+$/i;function i(e){return!!e&&null!==e.match(r)}const o={test:e=>!!e.hostname.match(/(?:dx\.)?(?:www\.)?doi\.org/),parse:e=>e.pathname.replace(/^\//,"")};function a(e){const t=e.pathname.split("/").filter((e=>!!e));return t.slice(0,-1).map(((e,n)=>`${e}/${t[n+1]}`))}const l=[o],c=[o,{test:e=>!!a(e).find(i),parse:e=>a(e).find(i)},{test:e=>e.hostname.endsWith("elifesciences.org")&&e.pathname.startsWith("/articles/"),parse:e=>`10.7554/eLife.${e.pathname.replace("/articles/","")}`},{test:e=>e.hostname.endsWith("zenodo.org")&&!!e.pathname.match(/^\/(?:record|badge\/latestdoi)\//),parse:e=>`10.5281/zenodo.${e.pathname.replace(/^\/(?:record|badge\/latestdoi)\//,"")}`},{test:e=>i(e.searchParams.get("id")),parse:e=>e.searchParams.get("id")}];function u(e,t){let n;if(e){if(i(e))return e;if(e.startsWith("doi:")&&(n=e.slice(4),i(n)))return n;try{const r=new URL(e.startsWith("http")?e:`http://${e}`),i=((null==t?void 0:t.strict)?l:c).find((e=>e.test(r)));if(!i)return;n=i.parse(r)}catch(e){}return i(n)?n:void 0}}const s={validatePart:i,validate:function(e,t){return!!e&&!!u(e,t)},normalize:u,buildUrl:function(e,t){const n=u(e,t);if(n)return`https://doi.org/${n}`}}},3096:(e,t,n)=>{n.r(t),n.d(t,{DOITransformer:()=>ke,GithubTransformer:()=>_e,MultiPageReferenceState:()=>De,MystTransformer:()=>de,RRIDTransformer:()=>ye,ReferenceState:()=>Qe,WikiTransformer:()=>ge,admonitionHeadersPlugin:()=>l,admonitionHeadersTransform:()=>a,basicTransformations:()=>$e,basicTransformationsPlugin:()=>Be,blockMetadataPlugin:()=>Y,blockMetadataTransform:()=>K,blockNestingPlugin:()=>X,blockNestingTransform:()=>Z,blockquotePlugin:()=>ne,blockquoteTransform:()=>te,captionParagraphPlugin:()=>s,captionParagraphTransform:()=>u,codeBlockPlugin:()=>ee,codeBlockTransform:()=>V,codePlugin:()=>G,codeTransform:()=>J,enumerateTargetsPlugin:()=>Me,enumerateTargetsTransform:()=>Ue,footnotesPlugin:()=>b,footnotesTransform:()=>y,getFrontmatter:()=>Fe,headingLabelPlugin:()=>Re,headingLabelTransform:()=>Se,htmlIdsPlugin:()=>E,htmlIdsTransform:()=>N,htmlPlugin:()=>S,htmlTransform:()=>A,imageAltTextPlugin:()=>ie,imageAltTextTransform:()=>re,keysPlugin:()=>g,keysTransform:()=>m,liftMystDirectivesAndRolesPlugin:()=>ae,liftMystDirectivesAndRolesTransform:()=>oe,linksPlugin:()=>ce,linksTransform:()=>le,mathLabelPlugin:()=>B,mathLabelTransform:()=>I,mathNestingPlugin:()=>$,mathNestingTransform:()=>M,mathPlugin:()=>z,mathTransform:()=>H,mystTargetsPlugin:()=>Ae,mystTargetsTransform:()=>Oe,resolveReferencesPlugin:()=>He,resolveReferencesTransform:()=>Ie,unnestTransform:()=>C,updateLinkTextIfEmpty:()=>se});var r,i=n(93874);!function(e){e.admonition="admonition",e.attention="attention",e.caution="caution",e.danger="danger",e.error="error",e.important="important",e.hint="hint",e.note="note",e.seealso="seealso",e.tip="tip",e.warning="warning"}(r||(r={}));var o=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function a(e,t){(0,i.selectAll)("admonition",e).forEach((function(e){var n,i,a,l;if(e.kind&&e.kind!==r.admonition&&(e.children=o([{type:"admonitionTitle",children:[{type:"text",value:(l=e.kind,{attention:"Attention",caution:"Caution",danger:"Danger",error:"Error",important:"Important",hint:"Hint",note:"Note",seealso:"See Also",tip:"Tip",warning:"Warning"}[l]||'Unknown Admonition "'.concat(l,'"'))}]}],null!==(n=e.children)&&void 0!==n?n:[],!0),null===(i=null==t?void 0:t.replaceAdmonitionTitles)||void 0===i||i)){var c=e.children,u=c[0],s=c[1],f=c.slice(2);if("paragraph"===(null==s?void 0:s.type)&&1===(null===(a=s.children)||void 0===a?void 0:a.length)&&"strong"===s.children[0].type){var d=s.children[0].children;u.children=d,e.children=o([u],f,!0)}else"heading"===(null==s?void 0:s.type)&&(u.children=s.children,e.children=o([u],f,!0))}}))}var l=function(e){return function(t){a(t,e)}},c=n(62854);function u(e){(0,c.visit)(e,"caption",(function(e){var t;e.children&&"paragraph"!==(null===(t=e.children[0])||void 0===t?void 0:t.type)&&(e.children=[{type:"paragraph",children:e.children}])}))}var s=function(){return function(e){u(e)}},f=n(6993),d=n(76579),h=n(96904);function p(e){if(!e.key)return e.key=(0,h.Mc)(),e}function m(e){return(0,d.U)(e,p)}var g=function(){return function(e){m(e)}},v="myst-transforms:footnotes";function y(e,t,n){var r=(0,i.selectAll)("footnoteDefinition",e);n.references.footnotes=Object.fromEntries(r.map((function(e){return delete e.number,[e.identifier,m(e)]}))),(0,f.O)(e,"footnoteDefinition");var o=(0,i.selectAll)("footnoteReference",e),a=new Set(o.map((function(e){return Number(e.identifier)})).filter((function(e){return!Number.isNaN(e)&&e>0}))),l=0;o.forEach((function(e){var r;if(e.identifier){var i=null===(r=n.references.footnotes)||void 0===r?void 0:r[e.identifier];if(i){var o=Number(e.identifier);!Number.isNaN(o)&&o>0?(i.number=o,e.number=o):(l=function(e,t){do{e+=1}while(t.has(e));return e}(l,a),i.number=l,e.number=l)}else(0,h.Q6)(t,"No footnoteDefinition found for ".concat(e.identifier),{node:e,source:v})}else(0,h.Q6)(t,"FootnoteReference does not have an identifier",{node:e,source:v})}))}var b=function(e){return function(t,n){y(t,n,e)}},k=n(58579),w=n(60051),T=n(47184),_=n(69903),P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},P.apply(this,arguments)},O={keepBreaks:!0,htmlHandlers:{table:function(e,t){return e(t,"table",(0,w.$)(e,t))},th:function(e,t){var n=e(t,"tableCell",(0,w.$)(e,t));return n.header=!0,n},_brKeep:function(e,t){return e(t,"_break")}}};function A(e,t){var n=P(P({},O.htmlHandlers),null==t?void 0:t.htmlHandlers),r=P(P({},O),t);return(0,i.selectAll)("html",e).forEach((function(e){var t=(0,k.l)().use(T.Z,{fragment:!0}).parse(e.value);r.keepBreaks&&(0,i.selectAll)("[tagName=br]",t).forEach((function(e){e.tagName="_brKeep"}));var o=(0,k.l)().use(_.Z,{handlers:n}).runSync(t);e.type="htmlParsed",e.children=o.children,(0,c.visit)(e,(function(e){return delete e.position}))})),(0,h.fX)(e,"htmlParsed"),(0,i.selectAll)("_break",e).forEach((function(e){e.type="break"})),e}var S=function(e){return function(t){A(t,e)}};function N(e){var t=new Set;(0,d.U)(e,(function(e){if(e.html_id){if(t.has(e.html_id)){for(var n=e.html_id,r=1,i="".concat(n,"-").concat(r);t.has(i);)r+=1,i="".concat(n,"-").concat(r);return e.html_id=i,t.add(e.html_id),e}t.add(e.html_id)}}))}var E=function(){return function(e){N(e)}},R=n(77735),W=n.n(R);const x={}.hasOwnProperty;var j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},j.apply(this,arguments)};function C(e,t,n){var r=function(e){return function(e){if(!e||!e.children)throw new Error("Missing children in `parent` for `modifier`");!function(e,t,n){let r=-1;if(!e)throw new Error("Iterate requires that |this| not be "+e);if(!x.call(e,"length"))throw new Error("Iterate requires that |this| has a `length`");if("function"!=typeof t)throw new TypeError("`callback` must be a function");for(;++r<e.length;){if(!(r in e))continue;const i=t.call(n,e[r],r,e);"number"==typeof i&&(i<0&&(r=0),r=i-1)}}(e.children,t,e)};function t(t,n){return e(t,n,this)}}((function(e,r,o){var a;if(e.type===t&&0!==(0,i.selectAll)(n,e).length){var l=e,c=[],u=l.children,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(l,["children"]),f=function(){return(0,h.Bc)(j(j({},s),{children:[]}))},d=f(),p=function(){d.children.length>0&&c.push(d),d=f()};return u.forEach((function(e){if(e.type===n){var t=e;p(),c.push(t)}else d.children.push(e)})),p(),(a=o.children).splice.apply(a,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([r,1],c,!1)),r+c.length}}));(0,i.selectAll)("*:has(".concat(t,":has(").concat(n,"))"),e).forEach((function(e){r(e)}))}var q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},q.apply(this,arguments)},L="myst-transforms:math",Q={"Â ":" "},D={"\\mbox":"\\text{#1}"};function U(e,t,n,r){var i="math"===t.type,o=[];try{var a=W().renderToString(n,{displayMode:i,macros:q(q({},D),r),strict:function(e,t){o.push("".concat(e,", ").concat(t))}});return 0===o.length?{html:a}:{warnings:o,html:a}}catch(i){var l=i.message;if(l.includes("Expected 'EOF', got '&' at position")&&((0,h.Q6)(e,"Wrapping with \\begin{align*}",{node:t,note:l,source:L}),(c=U(e,t,"\\begin{align*}\n".concat(n,"\n\\end{align*}"),r)).html))return c;if(l.includes("Unknown column alignment: *")){(0,h.Q6)(e,'Alignment of "*" not supported, using "c"',{node:t,note:l,source:L});var c,u=/\\begin{array}{((?:\*\{[0-9]+\})c)}/g;if(n.match(u)&&(c=U(e,t,n.replace(u,"\\begin{array}{c}"),r)).html)return function(e,t){var n=e.warnings,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["warnings"]);if(!n)return r;var i=n.filter((function(e){return!e.includes("Too few columns specified")}));return 0===i.length?r:q(q({},r),{warnings:i})}(c)}return{error:l.replace("KaTeX parse error: ","")}}}function M(e,t){C(e,"paragraph","math")}function I(e,t){(0,i.selectAll)("math,inlineMath",e).forEach((function(e){!function(e,t){var n=t.value;n&&(Object.entries(Q).forEach((function(e){var t=e[0],r=e[1];n=n.replace(new RegExp(t,"g"),r)})),t.value=n)}(0,e),function(e,t){var n,r,i,o,a=t.value;if(a){var l=/\\begin\{equation([*]?)\}/g,c=/\\end\{equation([*]?)\}/g;if(1===(null===(n=a.match(l))||void 0===n?void 0:n.length)&&1===(null===(r=a.match(c))||void 0===r?void 0:r.length))if("inlineMath"!==t.type){var u="*"===(null===(i=l.exec(a))||void 0===i?void 0:i[1]);u===("*"===(null===(o=c.exec(a))||void 0===o?void 0:o[1]))?(t.enumerated=!u,t.value=a.replace(l,"").replace(c,"").trim()):(0,h.Q6)(e,"Mismatching begin/end environment numbering",{node:t,note:a,source:L})}else(0,h.Q6)(e,"Unexpected AMS environment in inline math node.",{node:t,note:a,source:L})}}(t,e),function(e,t){var n=t.value;if(n){var r=/\\label\{([^}]+)\}/g,i=r.exec(n);if(!i)return n;var o=i[1],a=(0,h._W)(o);"math"===t.type&&a?(!1===t.enumerated&&(0,h.Q6)(e,'Labelling an unnumbered math node with "\\label{'.concat(o,'}"'),{node:t,source:L}),t.identifier=a.identifier,t.label=a.label,t.html_id=a.html_id):"inlineMath"===t.type&&(0,h.Q6)(e,'Cannot use "\\label{'.concat(o,'}" in inline math'),{node:t,source:L}),t.value=n.replace(r,"").trim()}}(t,e)}))}function H(e,t,n){(0,i.selectAll)("math,inlineMath",e).forEach((function(e){!function(e,t,n){var r,i=t.value;if(!i){var o="No input for math node";return(0,h.Q6)(e,o,{node:t,note:t.value,source:L,fatal:!0}),t.error=!0,void(t.message=o)}i=function(e,t,n){return t.includes("\\begin{eqnarray}")?((0,h.Q6)(e,"Replacing \\begin{eqnarray} with \\begin{align*}",{node:n,note:"Although the standard eqnarray environment is available in LaTeX, it is better to use align or equation+split instead. Within eqnarray, spacing around signs of relation is not the preferred mathematical spacing, and is inconsistent with that spacing as it appears in other environments.",source:L,url:"http://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/required/amsmath/amsldoc.pdf"}),t.replace(/\\begin{eqnarray}/g,"\\begin{align*}").replace(/\\end{eqnarray}/g,"\\end{align*}")):t}(e,i,t);var a=null!==(r=null==n?void 0:n.macros)&&void 0!==r?r:{},l=U(e,t,i,a);if(l.html&&(t.html=l.html),l.warnings&&l.warnings.forEach((function(n){(0,h.Q6)(e,n,{node:t,note:t.value,source:"KaTeX"})})),l.error){var c=(0,h.Bc)(t),u=l.error.match(/position ([0-9]+):/);if(u&&c.position){var s=Number(u[1]),f=t.value.slice(0,s).split("\n"),d=f.length-1;c.position.start.line+=d,d>0?c.position.start.column=f[d].length:c.position.start.column+=s-1}(0,h._r)(e,l.error,{node:c,note:t.value,source:"KaTeX"}),t.error=!0,t.message=l.error}}(t,e,n)}))}var $=function(){return function(e,t){M(e)}},B=function(){return function(e,t){I(e,t)}},z=function(e){return function(t,n){H(t,n,e)}},F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F.apply(this,arguments)};function Z(e){if((0,i.select)("block",e)){if("block"!==e.children[0].type){var t=e.children.findIndex((function(e){return"block"===e.type})),n={type:"block",children:e.children.slice(0,t)},r=e.children.slice(t);e.children=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([n],r,!0)}}else{var o={type:"block",children:e.children};e.children=[o]}}var X=function(){return function(e){Z(e)}};function K(e,t){(0,i.selectAll)("block",e).forEach((function(e){var n,r;if(e.meta)try{var i=JSON.parse(e.meta);e.data=e.data?F(F({},e.data),i):i,delete e.meta}catch(n){(0,h._r)(t,"Problem parsing JSON for block",{node:e,source:"BlockTransform:BlockMetadata"})}if("string"==typeof(null===(n=e.data)||void 0===n?void 0:n.label)){var o=(0,h._W)(null===(r=e.data)||void 0===r?void 0:r.label);o&&(e.identifier=o.identifier,e.label=o.label,e.html_id=o.html_id,delete e.data.label)}}))}var Y=function(){return function(e,t){K(e,t)}};function J(e,t,n){(0,i.selectAll)("code",e).forEach((function(e){if(!e.lang){if(!(null==n?void 0:n.lang))return void(0,h.Q6)(t,"Language is not defined for code block",{node:e});e.lang=null==n?void 0:n.lang}e.lang.toLowerCase().includes("python")&&!1!==(null==n?void 0:n.transformPython)&&(e.lang="python")}))}var G=function(e){return function(t,n){J(t,n,e)}};function V(e){(0,i.selectAll)('mystDirective[name="code-block"]',e).forEach((function(e){var t,n,r;if((null===(t=e.options)||void 0===t?void 0:t.name)||(null===(n=e.options)||void 0===n?void 0:n.caption)){var i=null===(r=e.children)||void 0===r?void 0:r[0],o={type:"caption",children:[{type:"paragraph",children:[{type:"text",value:e.options.caption}]}]},a={type:"container",kind:"code",label:i.label,identifier:i.identifier,children:[i,o]};delete i.label,delete i.identifier,e.children=a}}))}var ee=function(){return function(e){V(e)}};function te(e){(0,i.selectAll)("blockquote",e).forEach((function(e){var t;if(!(e.children.length<2)){var n=e.children[e.children.length-1];if("list"===n.type&&1===(null===(t=n.children)||void 0===t?void 0:t.length)){var r=e;r.type="container",r.kind="quote";var i={type:"caption",children:[{type:"paragraph",children:n.children[0].children}]},o={type:"blockquote",children:e.children.slice(0,-1)};r.children=[o,i]}}}))}var ne=function(){return function(e){te(e)}};function re(e){(0,i.selectAll)("container",e).forEach((function(e){var t,n=(0,i.select)("image",e);if(n&&!n.alt){var r=(0,i.select)("caption > paragraph",e);if(r){var o=null===(t=r.children)||void 0===t?void 0:t.filter((function(e){return"captionNumber"!==e.type}));!o||o.length<1||(n.alt=(0,h.lr)(o))}}}))}var ie=function(){return function(e){re(e)}};function oe(e){(0,h.fX)(e,"mystDirective"),(0,h.fX)(e,"mystRole")}var ae=function(){return function(e){oe(e)}};function le(e,t,n){var r;(0,i.selectAll)(null!==(r=n.selector)&&void 0!==r?r:"link,card",e).forEach((function(e){!function(e){var t;if(1===(null===(t=e.children)||void 0===t?void 0:t.length)&&"text"===e.children[0].type){var n=e.children[0].value;if(!(n.length<20||n.match(/\s/))){var r=n.split("//").map((function(e){return e.replace(/([/~.,\-_?#%])/giu,"â$1").replace(/([=&])/giu,"â$1â")})).join("//â");e.children[0].value=r}}}(e),e.urlSource||(e.urlSource=e.url);var r=n.transformers.find((function(t){return t.test(e.urlSource)}));r&&(r.transform(e,t)?(delete e.error,r.protocol&&(e.protocol=r.protocol)):e.error=!0)}))}var ce=function(e){return function(t,n){le(t,n,e)}};function ue(e){return null==e?void 0:e.replace(/https?:\/\//,"")}function se(e,t){var n,r,i,o,a,l;if(t){var c=t?[{type:"text",value:t}]:[];(1!==(null===(n=e.children)||void 0===n?void 0:n.length)||"text"!==(null===(i=null===(r=e.children)||void 0===r?void 0:r[0])||void 0===i?void 0:i.type)||(null===(a=null===(o=e.children)||void 0===o?void 0:o[0])||void 0===a?void 0:a.value)!==(e.urlSource||e.url))&&e.children&&0!==(null===(l=e.children)||void 0===l?void 0:l.length)||(e.children=c)}}var fe="LinkTransform:MystTransformer",de=function(){function e(e){this.protocol="myst",this.intersphinx=e}return e.prototype.test=function(e){return!!(null==e?void 0:e.startsWith("myst:"))},e.prototype.transform=function(e,t){var n,r=e.urlSource||e.url;try{n=new URL(r)}catch(n){return(0,h._r)(t,'Could not parse url for "'.concat(r,'"'),{node:e,source:fe}),!1}if(!n.hash)return(0,h._r)(t,'Must provide a target for "'.concat(r,'"'),{node:e,note:"Use the `#` symbol to create a target, for example, <myst:project#my-target>",source:fe}),!1;var i=n.hash.replace(/^#/,""),o=this.intersphinx.find((function(e){return n.pathname?e.id===n.pathname:!!e.getEntry({name:i})}));if(!o)return(0,h.Q6)(t,'Unknown project "'.concat(n.pathname,'" for link: ').concat(r),{node:e,source:fe}),!1;var a=o.getEntry({name:i});return a?(e.internal=!1,e.url=a.location,se(e,a.display||o.id||"(see documentation)"),!0):((0,h.Q6)(t,'"'.concat(r,'" not found interspinx ').concat(o.id," (").concat(o.path,")"),{node:e,source:fe}),!1)},e}(),he=/^(?:https?:\/\/)?(?:([a-z]+)\.)?wikipedia\.org\/wiki\/(.+)$/,pe="LinkTransform:WikiTransformer";function me(e,t){return void 0===t&&(t=""),e.replace(/\/?(wiki\/?)?$/,t).replace(/^\/?(wiki\/)/,"")}var ge=function(){function e(e){var t,n;this.protocol="wiki",this.wikiUrl=me(null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"https://".concat((null==e?void 0:e.lang)||"en",".wikipedia.org/"),"/"),this.lang=(null==e?void 0:e.lang)||(null===(n="".concat(this.wikiUrl,"wiki/x").match(he))||void 0===n?void 0:n[1])||void 0}return e.prototype.test=function(e){return!(!e||!e.startsWith("wiki:")&&!e.match(he)&&!ue(e).startsWith(ue(this.wikiUrl)))},e.prototype.pageName=function(e){if(e.startsWith("wiki:"))return{page:e.replace(/^wiki:/,"").trim(),wiki:this.wikiUrl,lang:this.lang};if(ue(e).startsWith(ue(this.wikiUrl)))return{page:me(ue(e).replace(ue(this.wikiUrl),"")),wiki:this.wikiUrl,lang:this.lang};var t=e.match(he);if(t){var n=t[1];return{page:t[2],wiki:"https://".concat(n||"en",".wikipedia.org/"),lang:n}}},e.prototype.transform=function(e,t){var n=e.urlSource||e.url,r=this.pageName(n);if(!r)return(0,h.Q6)(t,"Wikipedia pagenames should not contain spaces in link: ".concat(n),{node:e,note:"Replace spaces with underscores",source:pe}),!1;var i=r.page;return i.match(/\s/)&&(0,h.Q6)(t,"Wikipedia pagenames should not contain spaces in link: ".concat(n),{node:e,note:"Replace spaces with underscores",source:pe}),i.match(/\//)?((0,h._r)(t,'Wikipedia pagenames should not contain "/" in link: '.concat(n),{node:e,note:"Only point to the final page name, do not include any other parts of the Wikipedia URL.",source:pe}),!1):(i=i.replace(/[\s]+/g,"_").replace(/_[_]+/,"_").replace(/(?:^_)|(?:_$)/g,""),e.url="".concat(r.wiki,"wiki/").concat(i),e.data={page:i,wiki:r.wiki,lang:r.lang},e.internal=!1,se(e,i.replace(/_/," ")),!0)},e}(),ve="https://scicrunch.org/resolver/",ye=function(){function e(){this.protocol="rrid"}return e.prototype.test=function(e){return!!e&&(!!e.startsWith("rrid:")||ue(e).startsWith(ue(ve)))},e.prototype.transform=function(e,t){var n,r=e.urlSource||e.url,i=(n=r).startsWith("rrid:")?n.replace(/^rrid:/,"").trim():ue(n).startsWith(ue(ve))?ue(n).replace(ue(ve),"").trim():n.trim();return function(e){return!!e}(i)?(e.url="".concat(ve).concat(i),e.data={rrid:i},e.internal=!1,se(e,i),!0):((0,h.Q6)(t,"RRID is not valid: ".concat(r),{node:e,source:"LinkTransform:RRIDTransformer"}),!1)},e}(),be=n(7064),ke=function(){function e(){this.protocol="doi"}return e.prototype.test=function(e){return!!(null==e?void 0:e.startsWith("doi:"))||!(!e||!be.ZP.validate(e,{strict:!0}))},e.prototype.transform=function(e,t){var n=e.urlSource||e.url,r=be.ZP.normalize(n);return r&&be.ZP.validate(r)?(e.url="".concat("https://doi.org/").concat(r),e.data={doi:r},e.internal=!1,se(e,""),!0):((0,h._r)(t,"DOI is not valid: ".concat(n),{node:e,source:"LinkTransform:DOITransformer"}),!1)},e}(),we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},we.apply(this,arguments)};function Te(e){return"https://raw.githubusercontent.com/".concat(e.org,"/").concat(e.repo,"/").concat(e.reference,"/").concat(e.file)}var _e=function(){function e(){this.protocol="github"}return e.prototype.test=function(e){return!!e&&ue(e).startsWith(ue("https://github.com/"))},e.prototype.transform=function(e,t){var n=function(e){var t=function(e){try{return new URL("https://".concat(ue(e)))}catch(e){return}}(e);if("github.com"===(null==t?void 0:t.host)){var n=t.pathname.match(/^\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)/);if(n){var r=n[1],i=n[2],o=n[3],a=n[4],l=t.hash.match(/L([0-9]+)(?:-L([0-9]+))?/),c=null!=l?l:[],u=c[1],s=c[2];return{kind:"file",org:r,repo:i,reference:o,file:a,from:u?Number(u):void 0,to:s?Number(s):void 0}}}}(e.urlSource||e.url);return!!n&&(e.data=we(we({},n),{raw:Te(n)}),e.internal=!1,se(e,n.file),!0)},e}(),Pe=n(33262);function Oe(e){(0,c.visit)(e,"mystTarget",(function(e,t,n){var r=(0,Pe.U)(n,t),i=(0,h._W)(e.label);r&&i&&(r.identifier=i.identifier,r.label=i.label,r.html_id=i.html_id)})),(0,f.O)(e,"mystTarget")}var Ae=function(){return function(e){Oe(e)}};function Se(e){(0,i.selectAll)("heading",e).forEach((function(e){if(!e.label&&!e.identifier){var t=(0,h._W)((0,h.lr)(e.children));t&&(e.identifier=t.html_id,e.label=t.label,e.html_id=t.html_id,e.implicit=!0)}}))}var Ne,Ee,Re=function(){return function(e){Se(e)}},We=n(78312),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xe.apply(this,arguments)},je="myst-transforms:enumerate";!function(e){e.heading="heading",e.equation="equation",e.figure="figure",e.table="table",e.code="code"}(Ne||(Ne={})),function(e){e.ref="ref",e.numref="numref",e.eq="eq"}(Ee||(Ee={}));var Ce="??";function qe(e,t,n,r,i){var o;!(null===(o=t.children)||void 0===o?void 0:o.length)&&(0,h.Eq)(t,n);var a=null!=r?String(r):Ce;t.template||(t.template=n),a&&a!==Ce&&(t.enumerator=a);var l={s:!1,number:!1,name:!1};if((0,We.n)(t,{"%s":function(){return l.s=!0,a},"{number}":function(){return l.number=!0,a},"{name}":function(){return l.name=!0,i||t.label||t.identifier}}),a===Ce&&(l.number||l.s)&&e){var c=l.number&&l.s?'"{number}" and "%s"':"".concat(l.number?'"number"':'"%s"');(0,h.Q6)(e,'Reference for "'.concat(t.identifier,'" uses ').concat(c," in the template, but node is not numbered."),{node:t,note:'The node was filled in with "??" as the number.',source:je})}}function Le(e,t,n,r){var i,o;return"boolean"==typeof r?r:"heading"===t&&"heading"===e.type?null!==(i=n["heading_".concat(e.depth)])&&void 0!==i&&i:null!==(o=n[t])&&void 0!==o&&o}var Qe=function(){function e(e){this.numberAll=null,this.targetCounts=(null==e?void 0:e.targetCounts)||{},"boolean"==typeof(null==e?void 0:e.numbering)?(this.numberAll=null==e?void 0:e.numbering,this.numbering={}):this.numbering=xe({equation:!0,figure:!0,table:!0},null==e?void 0:e.numbering),this.targets={},this.file=null==e?void 0:e.file}return e.prototype.addTarget=function(e){var t=e;if("crossReference"!==t.type&&"cite"!==t.type&&"footnoteDefinition"!==t.type&&"footnoteReference"!==t.type){var n=function(e){return"container"===e.type?e.kind||Ne.figure:"math"===e.type?Ne.equation:e.type}(e),r=Le(e,n,this.numbering,this.numberAll),i=null;if(!1!==e.enumerated&&r&&(i=this.incrementCount(e,n),e.enumerator=i),e.html_id||(e.html_id=(0,h.Lh)(e.identifier)),e.identifier&&this.targets[e.identifier]){if(!this.file)return;if(e.implicit)return;(0,h.Q6)(this.file,'Duplicate identifier "'.concat(e.identifier,'" for node of type ').concat(e.type),{node:e,source:je})}else e.identifier&&(this.targets[e.identifier]={node:e,kind:n})}},e.prototype.initializeNumberedHeadingDepths=function(e){var t=(0,i.selectAll)("heading",e).filter((function(e){return!1!==e.enumerated})),n=new Set(t.map((function(e){return e.depth})));this.targetCounts.heading=[1,2,3,4,5,6].map((function(e){return n.has(e)?0:null}))},e.prototype.incrementCount=function(e,t){if(t===Ne.heading&&"heading"===e.type)return this.targetCounts.heading||(this.targetCounts.heading=[0,0,0,0,0,0]),this.targetCounts.heading=(n=e.depth,r=this.targetCounts.heading,i=n-1,r.map((function(e,t){return null===e||t<i?e:t===i?e+1:0}))),function(e,t){for(e=e.filter((function(e){return null!==e}));e&&0===e[e.length-1];)e.pop();var n=e.join(".");return t?t.replace(/%s/g,String(n)):String(n)}(this.targetCounts.heading,this.numbering.enumerator);var n,r,i;t in this.targetCounts?this.targetCounts[t]+=1:this.targetCounts[t]=1;var o=this.targetCounts[t],a=this.numbering.enumerator;return a?a.replace(/%s/g,String(o)):String(o)},e.prototype.getTarget=function(e){if(e)return this.targets[e]},e.prototype.resolveReferenceContent=function(e){var t,n,r=this.getTarget(e.identifier);if(r){e.kind=r.kind;var o=!(null===(t=e.children)||void 0===t?void 0:t.length);if(r.kind===Ne.heading){var a=Le(r.node,Ne.heading,this.numbering,this.numberAll)?"Section %s":"{name}";qe(this.file,e,a,r.node.enumerator,(0,h.Bc)(r.node).children)}else if(r.kind===Ne.equation)qe(this.file,e,"(%s)",r.node.enumerator);else{var l=(0,i.select)("caption > paragraph",r.node),c=l?null===(n=(0,h.Bc)(l))||void 0===n?void 0:n.children:void 0;c&&e.kind===Ee.ref&&o&&(e.children=c);var u=r.node.enumerator?function(e){switch(e){case Ne.heading:return"Section %s";case Ne.equation:return"(%s)";case Ne.figure:return"Figure %s";case Ne.table:return"Table %s";case Ne.code:return"Program %s";default:return"".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1)," %s")}}(r.kind):"{name}";qe(this.file,e,u,r.node.enumerator,c)}e.resolved=!0,e.identifier=r.node.identifier}else this.warnNodeTargetNotFound(e)},e.prototype.warnNodeTargetNotFound=function(e){this.file&&(0,h.Q6)(this.file,"Cross reference target was not found: ".concat(e.identifier),{node:e,source:je})},e}(),De=function(){function e(e,t){var n,r,i;this.states=e,this.fileState=null===(n=e.filter((function(e){return e.file===t}))[0])||void 0===n?void 0:n.state,this.file=null===(r=this.fileState)||void 0===r?void 0:r.file,this.url=null===(i=e.filter((function(e){return e.file===t}))[0])||void 0===i?void 0:i.url,this.filePath=t}return e.prototype.resolveStateProvider=function(e,t){if(e)return this.fileState.getTarget(e)?{state:this.fileState,file:this.filePath,url:this.url}:this.states.find((function(t){return!!t.state.getTarget(e)}))},e.prototype.addTarget=function(e){return this.fileState.addTarget(e)},e.prototype.initializeNumberedHeadingDepths=function(e){return this.fileState.initializeNumberedHeadingDepths(e)},e.prototype.getTarget=function(e,t){var n=this.resolveStateProvider(e,t);return null==n?void 0:n.state.getTarget(e)},e.prototype.resolveReferenceContent=function(e){var t=this.resolveStateProvider(e.identifier);t?(null==t||t.state.resolveReferenceContent(e),e.resolved&&(null==t?void 0:t.file)!==this.filePath&&(e.remote=!0,e.url=t.url||void 0)):this.fileState.warnNodeTargetNotFound(e)},e}(),Ue=function(e,t){return t.state.initializeNumberedHeadingDepths(e),(0,i.selectAll)("container,math,heading,[identifier]",e).forEach((function(e){t.state.addTarget(e)})),e},Me=function(e){return function(t){Ue(t,e)}},Ie=function(e,t,n){!function(e,t){(0,i.selectAll)("link",e).forEach((function(e){var n,r=e,i=r.url.replace(/^#/,""),o=(0,h._W)(i),a=null!==(n=t.state.getTarget(i))&&void 0!==n?n:t.state.getTarget(null==o?void 0:o.identifier);if(a&&o){!r.url.startsWith("#")&&t.state.file&&(0,h.Q6)(t.state.file,"Legacy syntax used for link target, please prepend a '#' to your link url: \"".concat(r.url,'"'),{node:e,note:"The link target should be of the form `[](#target)`, including the `#` sign.\nThis may be deprecated in the future.",source:je});var l=r;l.type="crossReference",l.identifier=o.identifier,l.label=o.label,delete l.kind,delete l.url,a.node.implicit&&t.state.file&&(0,h.Q6)(t.state.file,'Linking "'.concat(a.node.identifier,'" to an implicit ').concat(a.kind," reference, best practice is to create an explicit reference."),{node:e,note:"Explicit references do not break when you update the title to a section, they are preferred over using the implicit HTML ID created for headers.",source:je})}else{if(!t.state.file||!r.url.startsWith("#"))return;(0,h.Q6)(t.state.file,'No target for internal reference "'.concat(r.url,'" was found.'),{node:e,source:je})}}))}(e,n),function(e,t){(0,c.visit)(e,"crossReference",(function(e){t.state.resolveReferenceContent(e)}))}(e,n),function(e,t,n){(0,i.selectAll)("container",e).filter((function(e){return e.enumerator})).forEach((function(e){var r,o,a,l=null===(r=n.state.getTarget(e.identifier))||void 0===r?void 0:r.node.enumerator,c=(0,i.select)("caption > paragraph",e);if(l&&c&&"captionNumber"!==(null===(o=c.children[0])||void 0===o?void 0:o.type)){var u={type:"captionNumber",kind:e.kind,label:e.label,identifier:e.identifier,html_id:e.html_id,enumerator:l};qe(t,u,function(e){switch(e){case"table":return"Table %s:";case"code":return"Program %s:";default:return"Figure %s:"}}(e.kind),l),c.children=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([u],null!==(a=null==c?void 0:c.children)&&void 0!==a?a:[],!0)}}))}(e,t,n)},He=function(e){return function(t,n){Ie(t,n,e)}};function $e(e,t){V(e),oe(e),u(e),M(e),I(e,t),Oe(e),Se(e),a(e),Z(e),K(e,t),N(e),re(e),te(e)}var Be=function(){return function(e,t){$e(e,t)}},ze=n(47180);function Fe(e,t){var n,r,o;void 0===t&&(t={removeYaml:!0,removeHeading:!0});var a="block"===(null===(n=e.children[0])||void 0===n?void 0:n.type)?e.children[0]:e,l=null===(r=a.children)||void 0===r?void 0:r[0],c=null===(o=a.children)||void 0===o?void 0:o[1],u={},s="code"===(null==l?void 0:l.type)&&"yaml"===(null==l?void 0:l.lang);s&&(u=ze.ZP.load(l.value),t.removeYaml&&(l.type="__delete__"));var d=s?c:l;if("heading"===(null==d?void 0:d.type)&&1===d.depth){var p=(0,h.lr)(d.children);u.title||(u.title=p),u.title&&u.title===p&&t.removeHeading&&(d.type="__delete__")}if(!u.title){var m=(0,i.select)("heading",e);m&&(u.title=(0,h.lr)(m.children),t.removeHeading&&(m.type="__delete__"))}return(t.removeHeading||t.removeYaml)&&null===(0,f.O)(e,"__delete__")&&(0,f.O)(e,{cascade:!1},"__delete__"),{tree:e,frontmatter:u}}}}]);